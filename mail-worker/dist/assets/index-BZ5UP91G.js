import{b as J,aS as W,S as H,d as N,_ as K,a as q,b5 as Q,A as R,l as h,b6 as O,J as X,b7 as Y,p as b,o as p,q as _,O as P,g as C,j as z,h as a,n as y,f as I,M as F,aj as x,t as A,r as ee,e as D,Q as te,P as $,ag as oe,T as ne,R as se,E as w,b8 as ie,N as M,b9 as B,ba as V,a7 as ae,aJ as le,D as re,bb as j,bc as ce}from"./index-92mnh-J5.js";const U=["primary","success","info","warning","error"],fe=J({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:H},id:{type:String,default:""},message:{type:N([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:N(Function),default:()=>{}},onClose:{type:N(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...U,""],default:""},zIndex:Number,closeIcon:{type:H,default:W}}),ue={destroy:()=>!0},de=q({name:"ElNotification"}),pe=q({...de,props:fe,emits:ue,setup(e,{expose:s}){const t=e,{ns:n,zIndex:r}=Q("notification"),{nextZIndex:c,currentZIndex:u}=r,i=R(!1);let f;const l=h(()=>{const o=t.type;return o&&O[t.type]?n.m(o):""}),d=h(()=>t.type&&O[t.type]||t.icon),v=h(()=>t.position.endsWith("right")?"right":"left"),E=h(()=>t.position.startsWith("top")?"top":"bottom"),Z=h(()=>{var o;return{[E.value]:`${t.offset}px`,zIndex:(o=t.zIndex)!=null?o:u.value}});function k(){t.duration>0&&({stop:f}=se(()=>{i.value&&S()},t.duration))}function L(){f?.()}function S(){i.value=!1}function G({code:o}){o===w.delete||o===w.backspace?L():o===w.esc?i.value&&S():k()}return X(()=>{k(),c(),i.value=!0}),Y(document,"keydown",G),s({visible:i,close:S}),(o,be)=>(p(),b(ne,{name:a(n).b("fade"),onBeforeLeave:o.onClose,onAfterLeave:Ce=>o.$emit("destroy"),persisted:""},{default:_(()=>[P(C("div",{id:o.id,class:y([a(n).b(),o.customClass,a(v)]),style:z(a(Z)),role:"alert",onMouseenter:L,onMouseleave:k,onClick:o.onClick},[a(d)?(p(),b(a(F),{key:0,class:y([a(n).e("icon"),a(l)])},{default:_(()=>[(p(),b(x(a(d))))]),_:1},8,["class"])):I("v-if",!0),C("div",{class:y(a(n).e("group"))},[C("h2",{class:y(a(n).e("title")),textContent:A(o.title)},null,10,["textContent"]),P(C("div",{class:y(a(n).e("content")),style:z(o.title?void 0:{margin:0})},[ee(o.$slots,"default",{},()=>[o.dangerouslyUseHTMLString?(p(),D(te,{key:1},[I(" Caution here, message could've been compromised, never use user's input as message "),C("p",{innerHTML:o.message},null,8,["innerHTML"])],2112)):(p(),D("p",{key:0},A(o.message),1))])],6),[[$,o.message]]),o.showClose?(p(),b(a(F),{key:0,class:y(a(n).e("closeBtn")),onClick:oe(S,["stop"])},{default:_(()=>[(p(),b(x(o.closeIcon)))]),_:1},8,["class","onClick"])):I("v-if",!0)],2)],46,["id","onClick"]),[[$,i.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var me=K(pe,[["__file","notification.vue"]]);const g={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},T=16;let ve=1;const m=function(e={},s){if(!ie)return{close:()=>{}};(M(e)||B(e))&&(e={message:e});const t=e.position||"top-right";let n=e.offset||0;g[t].forEach(({vm:d})=>{var v;n+=(((v=d.el)==null?void 0:v.offsetHeight)||0)+T}),n+=T;const r=`notification_${ve++}`,c=e.onClose,u={...e,offset:n,id:r,onClose:()=>{ye(r,t,c)}};let i=document.body;V(e.appendTo)?i=e.appendTo:M(e.appendTo)&&(i=document.querySelector(e.appendTo)),V(i)||(i=document.body);const f=document.createElement("div"),l=ae(me,u,le(u.message)?u.message:B(u.message)?()=>u.message:null);return l.appContext=re(s)?m._context:s,l.props.onDestroy=()=>{j(null,f)},j(l,f),g[t].push({vm:l}),i.appendChild(f.firstElementChild),{close:()=>{l.component.exposed.visible.value=!1}}};U.forEach(e=>{m[e]=(s={},t)=>((M(s)||B(s))&&(s={message:s}),m({...s,type:e},t))});function ye(e,s,t){const n=g[s],r=n.findIndex(({vm:l})=>{var d;return((d=l.component)==null?void 0:d.props.id)===e});if(r===-1)return;const{vm:c}=n[r];if(!c)return;t?.(c);const u=c.el.offsetHeight,i=s.split("-")[0];n.splice(r,1);const f=n.length;if(!(f<1))for(let l=r;l<f;l++){const{el:d,component:v}=n[l].vm,E=Number.parseInt(d.style[i],10)-u-T;v.props.offset=E}}function ge(){for(const e of Object.values(g))e.forEach(({vm:s})=>{s.component.exposed.visible.value=!1})}function he(e="top-right"){var s,t,n;let r=((t=(s=g[e][0])==null?void 0:s.vm.props)==null?void 0:t.offset)||0;for(const{vm:c}of g[e])c.component.props.offset=r,r+=(((n=c.el)==null?void 0:n.offsetHeight)||0)+T}m.closeAll=ge;m.updateOffsets=he;m._context=null;const Te=ce(m,"$notify");export{Te as E};
