import{b as ge,aD as Pe,ak as le,a as x,L as ze,aV as re,J as Ce,b9 as Ie,I as ye,k as Re,A as N,l as L,h as e,N as De,G as q,X as Ge,K as _e,H as We,_ as Se,c as we,bs as Fe,e as z,o as $,p as fe,f as j,g as O,a7 as K,q as J,O as Y,ag as Q,n as P,M as de,aW as Ke,P as Z,T as me,C as je,r as be,j as Ne,Q as Ue,af as Xe,t as qe,z as Je,F as Qe,D as Ye,w as Ze,m as xe}from"./index-92mnh-J5.js";import{f as ke,C as et}from"./vnode-DfneDD37.js";import{t as he}from"./throttle-BQKBmdXm.js";const tt=ge({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),at={change:(a,i)=>[a,i].every(Pe)},Me=Symbol("carouselContextKey"),ie="ElCarouselItem",nt=(a,i,u)=>ke(a.subTree).filter(s=>{var w;return Ie(s)&&((w=s.type)==null?void 0:w.name)===i&&!!s.component}).map(s=>s.component.uid).map(s=>u[s]).filter(s=>!!s),ot=(a,i)=>{const u=le({}),o=le([]),y=new WeakMap,s=c=>{u.value[c.uid]=c,re(u),Ce(()=>{const f=c.getVnode().el,d=f.parentNode;if(!y.has(d)){y.set(d,[]);const h=d.insertBefore.bind(d);d.insertBefore=(k,E)=>(y.get(d).some(_=>k===_||E===_)&&re(u),h(k,E))}y.get(d).push(f)})},w=c=>{delete u.value[c.uid],re(u);const f=c.getVnode().el,d=f.parentNode,h=y.get(d),k=h.indexOf(f);h.splice(k,1)},b=()=>{o.value=nt(a,i,u.value)},n=c=>c.render(),I=x({setup(c,{slots:f}){return()=>(b(),f.default?ze(n,{render:f.default}):null)}});return{children:o,addChild:s,removeChild:w,ChildrenSorter:I}},pe=300,st=(a,i,u)=>{const{children:o,addChild:y,removeChild:s,ChildrenSorter:w}=ot(ye(),ie),b=Re(),n=N(-1),I=N(null),c=N(!1),f=N(),d=N(0),h=N(!0),k=L(()=>a.arrow!=="never"&&!e(_)),E=L(()=>o.value.some(t=>t.props.label.toString().length>0)),B=L(()=>a.type==="card"),_=L(()=>a.direction==="vertical"),R=L(()=>a.height!=="auto"?{height:a.height}:{height:`${d.value}px`,overflow:"hidden"}),D=he(t=>{S(t)},pe,{trailing:!0}),r=he(t=>{C(t)},pe),v=t=>h.value?n.value<=1?t<=1:t>1:!0;function p(){I.value&&(clearInterval(I.value),I.value=null)}function g(){a.interval<=0||!a.autoplay||I.value||(I.value=setInterval(()=>M(),a.interval))}const M=()=>{n.value<o.value.length-1?n.value=n.value+1:a.loop&&(n.value=0)};function S(t){if(De(t)){const V=o.value.filter(W=>W.props.name===t);V.length>0&&(t=o.value.indexOf(V[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const m=o.value.length,A=n.value;t<0?n.value=a.loop?m-1:0:t>=m?n.value=a.loop?0:m-1:n.value=t,A===n.value&&T(A),H()}function T(t){o.value.forEach((m,A)=>{m.translateItem(A,n.value,t)})}function l(t,m){var A,V,W,ue;const X=e(o),ce=X.length;if(ce===0||!t.states.inStage)return!1;const Ae=m+1,$e=m-1,ve=ce-1,Le=X[ve].states.active,He=X[0].states.active,Ve=(V=(A=X[Ae])==null?void 0:A.states)==null?void 0:V.active,Oe=(ue=(W=X[$e])==null?void 0:W.states)==null?void 0:ue.active;return m===ve&&He||Ve?"left":m===0&&Le||Oe?"right":!1}function U(){c.value=!0,a.pauseOnHover&&p()}function ee(){c.value=!1,g()}function te(t){e(_)||o.value.forEach((m,A)=>{t===l(m,A)&&(m.states.hover=!0)})}function ae(){e(_)||o.value.forEach(t=>{t.states.hover=!1})}function ne(t){n.value=t}function C(t){a.trigger==="hover"&&t!==n.value&&(n.value=t)}function F(){S(n.value-1)}function G(){S(n.value+1)}function H(){p(),a.pauseOnHover||g()}function oe(t){a.height==="auto"&&(d.value=t)}function Ee(){var t;const m=(t=b.default)==null?void 0:t.call(b);if(!m)return null;const V=ke(m).filter(W=>Ie(W)&&W.type.name===ie);return V?.length===2&&a.loop&&!B.value?(h.value=!0,V):(h.value=!1,null)}q(()=>n.value,(t,m)=>{T(m),h.value&&(t=t%2,m=m%2),m>-1&&i(et,t,m)});const Be=L({get:()=>h.value?n.value%2:n.value,set:t=>n.value=t});q(()=>a.autoplay,t=>{t?g():p()}),q(()=>a.loop,()=>{S(n.value)}),q(()=>a.interval,()=>{H()});const se=le();return Ce(()=>{q(()=>o.value,()=>{o.value.length>0&&S(a.initialIndex)},{immediate:!0}),se.value=Ge(f.value,()=>{T()}),g()}),_e(()=>{p(),f.value&&se.value&&se.value.stop()}),We(Me,{root:f,isCardType:B,isVertical:_,items:o,loop:a.loop,cardScale:a.cardScale,addItem:y,removeItem:s,setActiveItem:S,setContainerHeight:oe}),{root:f,activeIndex:n,exposeActiveIndex:Be,arrowDisplay:k,hasLabel:E,hover:c,isCardType:B,items:o,isVertical:_,containerStyle:R,isItemsTwoLength:h,handleButtonEnter:te,handleButtonLeave:ae,handleIndicatorClick:ne,handleMouseEnter:U,handleMouseLeave:ee,setActiveItem:S,prev:F,next:G,PlaceholderItem:Ee,isTwoLengthShow:v,ItemsSorter:w,throttledArrowClick:D,throttledIndicatorHover:r}},rt="ElCarousel",lt=x({name:rt}),it=x({...lt,props:tt,emits:at,setup(a,{expose:i,emit:u}){const o=a,{root:y,activeIndex:s,exposeActiveIndex:w,arrowDisplay:b,hasLabel:n,hover:I,isCardType:c,items:f,isVertical:d,containerStyle:h,handleButtonEnter:k,handleButtonLeave:E,handleIndicatorClick:B,handleMouseEnter:_,handleMouseLeave:R,setActiveItem:D,prev:r,next:v,PlaceholderItem:p,isTwoLengthShow:g,ItemsSorter:M,throttledArrowClick:S,throttledIndicatorHover:T}=st(o,u),l=we("carousel"),{t:U}=Fe(),ee=L(()=>{const C=[l.b(),l.m(o.direction)];return e(c)&&C.push(l.m("card")),C}),te=L(()=>{const C=[l.e("indicators"),l.em("indicators",o.direction)];return e(n)&&C.push(l.em("indicators","labels")),o.indicatorPosition==="outside"&&C.push(l.em("indicators","outside")),e(d)&&C.push(l.em("indicators","right")),C});function ae(C){if(!o.motionBlur)return;const F=e(d)?`${l.namespace.value}-transitioning-vertical`:`${l.namespace.value}-transitioning`;C.currentTarget.classList.add(F)}function ne(C){if(!o.motionBlur)return;const F=e(d)?`${l.namespace.value}-transitioning-vertical`:`${l.namespace.value}-transitioning`;C.currentTarget.classList.remove(F)}return i({activeIndex:w,setActiveItem:D,prev:r,next:v}),(C,F)=>($(),z("div",{ref_key:"root",ref:y,class:P(e(ee)),onMouseenter:Q(e(_),["stop"]),onMouseleave:Q(e(R),["stop"])},[e(b)?($(),fe(me,{key:0,name:"carousel-arrow-left",persisted:""},{default:J(()=>[Y(O("button",{type:"button",class:P([e(l).e("arrow"),e(l).em("arrow","left")]),"aria-label":e(U)("el.carousel.leftArrow"),onMouseenter:G=>e(k)("left"),onMouseleave:e(E),onClick:Q(G=>e(S)(e(s)-1),["stop"])},[K(e(de),null,{default:J(()=>[K(e(Ke))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Z,(C.arrow==="always"||e(I))&&(o.loop||e(s)>0)]])]),_:1})):j("v-if",!0),e(b)?($(),fe(me,{key:1,name:"carousel-arrow-right",persisted:""},{default:J(()=>[Y(O("button",{type:"button",class:P([e(l).e("arrow"),e(l).em("arrow","right")]),"aria-label":e(U)("el.carousel.rightArrow"),onMouseenter:G=>e(k)("right"),onMouseleave:e(E),onClick:Q(G=>e(S)(e(s)+1),["stop"])},[K(e(de),null,{default:J(()=>[K(e(je))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Z,(C.arrow==="always"||e(I))&&(o.loop||e(s)<e(f).length-1)]])]),_:1})):j("v-if",!0),O("div",{class:P(e(l).e("container")),style:Ne(e(h)),onTransitionstart:ae,onTransitionend:ne},[K(e(p)),be(C.$slots,"default")],38),K(e(M),null,{default:J(()=>[C.indicatorPosition!=="none"?($(),z("ul",{key:0,class:P(e(te))},[($(!0),z(Ue,null,Xe(e(f),(G,H)=>Y(($(),z("li",{key:H,class:P([e(l).e("indicator"),e(l).em("indicator",C.direction),e(l).is("active",H===e(s))]),onMouseenter:oe=>e(T)(H),onClick:Q(oe=>e(B)(H),["stop"])},[O("button",{class:P(e(l).e("button")),"aria-label":e(U)("el.carousel.indicator",{index:H+1})},[e(n)?($(),z("span",{key:0},qe(G.props.label),1)):j("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Z,e(g)(H)]])),128))],2)):j("v-if",!0)]),_:1}),o.motionBlur?($(),z("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[O("defs",null,[O("filter",{id:"elCarouselHorizontal"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),O("filter",{id:"elCarouselVertical"},[O("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):j("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var ut=Se(it,[["__file","carousel.vue"]]);const ct=ge({name:{type:String,default:""},label:{type:[String,Number],default:""}}),vt=a=>{const i=Je(Me),u=ye(),o=N(),y=N(!1),s=N(0),w=N(1),b=N(!1),n=N(!1),I=N(!1),c=N(!1),{isCardType:f,isVertical:d,cardScale:h}=i;function k(r,v,p){const g=p-1,M=v-1,S=v+1,T=p/2;return v===0&&r===g?-1:v===g&&r===0?p:r<M&&v-r>=T?p+1:r>S&&r-v>=T?-2:r}function E(r,v){var p,g;const M=e(d)?((p=i.root.value)==null?void 0:p.offsetHeight)||0:((g=i.root.value)==null?void 0:g.offsetWidth)||0;return I.value?M*((2-h)*(r-v)+1)/4:r<v?-(1+h)*M/4:(3+h)*M/4}function B(r,v,p){const g=i.root.value;return g?((p?g.offsetHeight:g.offsetWidth)||0)*(r-v):0}const _=(r,v,p)=>{var g;const M=e(f),S=(g=i.items.value.length)!=null?g:Number.NaN,T=r===v;!M&&!Ye(p)&&(c.value=T||r===p),!T&&S>2&&i.loop&&(r=k(r,v,S));const l=e(d);b.value=T,M?(I.value=Math.round(Math.abs(r-v))<=1,s.value=E(r,v),w.value=e(b)?1:h):s.value=B(r,v,l),n.value=!0,T&&o.value&&i.setContainerHeight(o.value.offsetHeight)};function R(){if(i&&e(f)){const r=i.items.value.findIndex(({uid:v})=>v===u.uid);i.setActiveItem(r)}}const D={props:a,states:Qe({hover:y,translate:s,scale:w,active:b,ready:n,inStage:I,animating:c}),uid:u.uid,getVnode:()=>u.vnode,translateItem:_};return i.addItem(D),_e(()=>{i.removeItem(D)}),{carouselItemRef:o,active:b,animating:c,hover:y,inStage:I,isVertical:d,translate:s,isCardType:f,scale:w,ready:n,handleItemClick:R}},ft=x({name:ie}),dt=x({...ft,props:ct,setup(a){const i=a,u=we("carousel"),{carouselItemRef:o,active:y,animating:s,hover:w,inStage:b,isVertical:n,translate:I,isCardType:c,scale:f,ready:d,handleItemClick:h}=vt(i),k=L(()=>[u.e("item"),u.is("active",y.value),u.is("in-stage",b.value),u.is("hover",w.value),u.is("animating",s.value),{[u.em("item","card")]:c.value,[u.em("item","card-vertical")]:c.value&&n.value}]),E=L(()=>{const _=`${`translate${e(n)?"Y":"X"}`}(${e(I)}px)`,R=`scale(${e(f)})`;return{transform:[_,R].join(" ")}});return(B,_)=>Y(($(),z("div",{ref_key:"carouselItemRef",ref:o,class:P(e(k)),style:Ne(e(E)),onClick:e(h)},[e(c)?Y(($(),z("div",{key:0,class:P(e(u).e("mask"))},null,2)),[[Z,!e(y)]]):j("v-if",!0),be(B.$slots,"default")],14,["onClick"])),[[Z,e(d)]])}});var Te=Se(dt,[["__file","carousel-item.vue"]]);const gt=Ze(ut,{CarouselItem:Te}),Ct=xe(Te);export{gt as E,Ct as a,ot as u};
