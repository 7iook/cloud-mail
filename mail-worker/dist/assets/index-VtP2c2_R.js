import{ae as k,a4 as D,A as x,F as A,J as C,G as T,e as b,g as n,a7 as l,p as m,h as r,q as h,o as c,f as B,a8 as N}from"./index-92mnh-J5.js";import{u as P}from"./email-9j19DGMK.js";import{e as R}from"./index-DzjioUTY.js";import{L as V,S as j}from"./LayoutModeSelector-B-li_gUo.js";import{E as F}from"./EmailDetailPane-CMJxr8Q_.js";import{a as J,b as M,c as q}from"./email-CA6wn_3x.js";import{s as G,a as O}from"./star-BRkLAY2S.js";import{s as W}from"./time-utils-8_bD8pZw.js";import{I as S}from"./iconify-VCTUy_UH.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-scrollbar-lgMH0mZQ.js";import"./index-ChZfA3gH.js";import"./el-empty-CKfYwwv3.js";import"./index-CG9L6tLM.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-Dck20whD.js";import"./vnode-DfneDD37.js";import"./el-checkbox-DpAuy9Ti.js";import"./index-UYGPyXpS.js";import"./el-skeleton-item-UTnpAQ6A.js";import"./day-DI1_lKIq.js";import"./dayjs.min-BodJrPHb.js";import"./email-highlight-utils-Dx-h0BtP.js";import"./clipboard-utils-Bf-9Um4a.js";import"./el-overlay-jTA8uYnN.js";import"./index-B-u1Rqw0.js";import"./validator-Cw4sOcG_.js";/* empty css                  *//* empty css                       *//* empty css                 */import"./throttle-BQKBmdXm.js";const H={class:"email-page"},K={class:"page-header"},Q={class:"header-left"},U={class:"header-right"},X=Object.assign({name:"email"},{__name:"index",setup(Y){const e=P(),s=k(),d=D(),a=x({}),i=A({timeSort:0});C(()=>{e.emailScroll=a,e.loadSplitLayoutFromStorage(),y()}),T(()=>s.currentAccountId,()=>{a.value.refreshList()});function u(){i.timeSort=i.timeSort?0:1,a.value.refreshList()}function _(t){const{splitLayout:o}=e;o.mode==="none"||typeof window<"u"&&window.innerWidth<1025?g(t):e.selectEmail(t)}function g(t){e.contentData.email=t,e.contentData.delType="logic",e.contentData.showStar=!0,e.contentData.showReply=!0,N.push("/message")}const w=new Set;async function y(){for(;;){const t=a.value.latestEmail?.emailId||0;if(!a.value.firstLoad&&d.settings.autoRefreshTime)try{const o=s.currentAccountId,E=i.timeSort,p=await J(t,o);o===s.currentAccountId&&i.timeSort===E&&p.length>0&&p.forEach(f=>{w.add(f.emailId),a.value.addItem(f)})}catch(o){console.error(o)}await W(d.settings.autoRefreshTime*1e3)}}function I(t){e.starScroll?.addItem(t)}function L(t){e.starScroll?.deleteEmail([t.emailId])}function v(t,o){return q(s.currentAccountId,t,i.timeSort,o,0)}return(t,o)=>(c(),b("div",H,[n("div",K,[n("div",Q,[i.timeSort===0?(c(),m(r(S),{key:0,class:"icon",onClick:u,icon:"material-symbols-light:timer-arrow-down-outline",width:"28",height:"28"})):(c(),m(r(S),{key:1,class:"icon",onClick:u,icon:"material-symbols-light:timer-arrow-up-outline",width:"28",height:"28"}))]),n("div",U,[l(V)])]),l(j,{class:"split-container"},{list:h(()=>[l(R,{ref_key:"scroll",ref:a,"cancel-success":L,"star-success":I,getEmailList:v,emailDelete:r(M),"star-add":r(O),"star-cancel":r(G),"time-sort":i.timeSort,actionLeft:"4px",onJump:_},null,8,["emailDelete","star-add","star-cancel","time-sort"])]),detail:h(()=>[r(e).splitLayout?.showDetailPane?(c(),m(F,{key:0})):B("",!0)]),_:1})]))}}),Ct=z(X,[["__scopeId","data-v-9cdce11c"]]);export{Ct as default};
