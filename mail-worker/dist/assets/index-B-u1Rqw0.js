import{bA as Z,a as we,b as $e,c as Be,a7 as A,L as Ve,r as ne,d as ce,A as O,J as Me,W as De,K as ke,aE as de,bk as Re,l as k,b8 as Te,x as fe,G as oe,cq as He,v as Fe,bn as Ke,y as Ne,a1 as N,E as Ue,_ as Ye,ah as H,p as w,o as m,q as M,O as Q,g as B,n as c,ag as W,j as me,e as x,f as V,aj as F,t as K,a$ as q,P as _,i as ve,T as je,be as Xe,M as We,b5 as qe,F as Ge,bR as te,bB as pe,b6 as ge,aI as Je,aJ as se,N as le,b9 as Ie,bb as Se,bz as he,V as Le,ba as ye,D as Ze}from"./index-92mnh-J5.js";import{E as Qe,b as be}from"./index-CG9L6tLM.js";import{P as ee,i as xe,o as Ce,E as _e,b as en}from"./vnode-DfneDD37.js";import{i as nn}from"./validator-Cw4sOcG_.js";import{t as on}from"./index-ChZfA3gH.js";const Oe=e=>{if(!e)return{onClick:Z,onMousedown:Z,onMouseup:Z};let n=!1,a=!1;return{onClick:i=>{n&&a&&e(i),n=a=!1},onMousedown:i=>{n=i.target===i.currentTarget},onMouseup:i=>{a=i.target===i.currentTarget}}},tn=$e({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:ce([String,Array,Object])},zIndex:{type:ce([String,Number])}}),sn={click:e=>e instanceof MouseEvent},an="overlay";var ln=we({name:"ElOverlay",props:tn,emits:sn,setup(e,{slots:n,emit:a}){const l=Be(an),s=d=>{a("click",d)},{onClick:t,onMousedown:i,onMouseup:u}=Oe(e.customMaskEvent?void 0:s);return()=>e.mask?A("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:t,onMousedown:i,onMouseup:u},[ne(n,"default")],ee.STYLE|ee.CLASS|ee.PROPS,["onClick","onMouseup","onMousedown"]):Ve("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ne(n,"default")])}});const rn=ln,un=(e,n,a,l)=>{const s={offsetX:0,offsetY:0},t=O(!1),i=(v,b)=>{if(e.value){const{offsetX:z,offsetY:p}=s,E=e.value.getBoundingClientRect(),g=E.left,C=E.top,S=E.width,$=E.height,R=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,G=-g+z,L=-C+p,j=R-g-S+z,J=Y-C-($<Y?$:0)+p;l?.value||(v=Math.min(Math.max(v,G),j),b=Math.min(Math.max(b,L),J)),s.offsetX=v,s.offsetY=b,e.value.style.transform=`translate(${de(v)}, ${de(b)})`}},u=v=>{const b=v.clientX,z=v.clientY,{offsetX:p,offsetY:E}=s,g=S=>{t.value||(t.value=!0);const $=p+S.clientX-b,R=E+S.clientY-z;i($,R)},C=()=>{t.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",C)},d=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",u),window.addEventListener("resize",f))},o=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",u),window.removeEventListener("resize",f))},I=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},f=()=>{const{offsetX:v,offsetY:b}=s;i(v,b)};return Me(()=>{De(()=>{a.value?d():o()})}),ke(()=>{o()}),{isDragging:t,resetPosition:I,updatePosition:f}},cn=(e,n={})=>{Re(e)||on("[useLockscreen]","You need to pass a ref param to this function");const a=n.ns||Be("popup"),l=k(()=>a.bm("parent","hidden"));if(!Te||fe(document.body,l.value))return;let s=0,t=!1,i="0";const u=()=>{setTimeout(()=>{typeof document>"u"||t&&document&&(document.body.style.width=i,Ne(document.body,l.value))},200)};oe(e,d=>{if(!d){u();return}t=!fe(document.body,l.value),t&&(i=document.body.style.width,Fe(document.body,l.value)),s=xe(a.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,I=Ke(document.body,"overflowY");s>0&&(o||I==="scroll")&&t&&(document.body.style.width=`calc(100% - ${s}px)`)}),He(()=>u())},ae="_trap-focus-children",P=[],Ee=e=>{if(P.length===0)return;const n=P[P.length-1][ae];if(n.length>0&&e.code===Ue.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const a=e.shiftKey,l=e.target===n[0],s=e.target===n[n.length-1];l&&a&&(e.preventDefault(),n[n.length-1].focus()),s&&!a&&(e.preventDefault(),n[0].focus())}},dn={beforeMount(e){e[ae]=Ce(e),P.push(e),P.length<=1&&document.addEventListener("keydown",Ee)},updated(e){N(()=>{e[ae]=Ce(e)})},unmounted(){P.shift(),P.length===0&&document.removeEventListener("keydown",Ee)}},fn=we({name:"ElMessageBox",directives:{TrapFocus:dn},components:{ElButton:Qe,ElFocusTrap:en,ElInput:_e,ElOverlay:rn,ElIcon:We,...Xe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:nn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:a,zIndex:l,ns:s,size:t}=qe("message-box",k(()=>e.buttonSize)),{t:i}=a,{nextZIndex:u}=l,d=O(!1),o=Ge({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:te(pe),cancelButtonLoadingIcon:te(pe),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),I=k(()=>{const r=o.type;return{[s.bm("icon",r)]:r&&ge[r]}}),f=be(),v=be(),b=k(()=>{const r=o.type;return o.icon||r&&ge[r]||""}),z=k(()=>!!o.message),p=O(),E=O(),g=O(),C=O(),S=O(),$=k(()=>o.confirmButtonClass);oe(()=>o.inputValue,async r=>{await N(),e.boxType==="prompt"&&r&&ie()},{immediate:!0}),oe(()=>d.value,r=>{var h,y;r&&(e.boxType!=="prompt"&&(o.autofocus?g.value=(y=(h=S.value)==null?void 0:h.$el)!=null?y:p.value:g.value=p.value),o.zIndex=u()),e.boxType==="prompt"&&(r?N().then(()=>{var ue;C.value&&C.value.$el&&(o.autofocus?g.value=(ue=Pe())!=null?ue:p.value:g.value=p.value)}):(o.editorErrorMessage="",o.validateError=!1))});const R=k(()=>e.draggable),Y=k(()=>e.overflow),{isDragging:G}=un(p,E,R,Y);Me(async()=>{await N(),e.closeOnHashChange&&window.addEventListener("hashchange",L)}),ke(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",L)});function L(){d.value&&(d.value=!1,N(()=>{o.action&&n("action",o.action)}))}const j=()=>{e.closeOnClickModal&&X(o.distinguishCancelAndClose?"close":"cancel")},J=Oe(j),Ae=r=>{if(o.inputType!=="textarea")return r.preventDefault(),X("confirm")},X=r=>{var h;e.boxType==="prompt"&&r==="confirm"&&!ie()||(o.action=r,o.beforeClose?(h=o.beforeClose)==null||h.call(o,r,o,L):L())},ie=()=>{if(e.boxType==="prompt"){const r=o.inputPattern;if(r&&!r.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||i("el.messagebox.error"),o.validateError=!0,!1;const h=o.inputValidator;if(se(h)){const y=h(o.inputValue);if(y===!1)return o.editorErrorMessage=o.inputErrorMessage||i("el.messagebox.error"),o.validateError=!0,!1;if(le(y))return o.editorErrorMessage=y,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},Pe=()=>{var r,h;const y=(r=C.value)==null?void 0:r.$refs;return(h=y?.input)!=null?h:y?.textarea},re=()=>{X("close")},ze=()=>{e.closeOnPressEscape&&re()};return e.lockScroll&&cn(d),{...Je(o),ns:s,overlayEvent:J,visible:d,hasMessage:z,typeClass:I,contentId:f,inputId:v,btnSize:t,iconComponent:b,confirmButtonClasses:$,rootRef:p,focusStartRef:g,headerRef:E,inputRef:C,isDragging:G,confirmRef:S,doClose:L,handleClose:re,onCloseRequested:ze,handleWrapperClick:j,handleInputEnter:Ae,handleAction:X,t:i}}});function mn(e,n,a,l,s,t){const i=H("el-icon"),u=H("el-input"),d=H("el-button"),o=H("el-focus-trap"),I=H("el-overlay");return m(),w(je,{name:"fade-in-linear",onAfterLeave:f=>e.$emit("vanish"),persisted:""},{default:M(()=>[Q(A(I,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:M(()=>[B("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[A(o,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:M(()=>[B("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),e.ns.is("dragging",e.isDragging),{[e.ns.m("center")]:e.center}]),style:me(e.customStyle),tabindex:"-1",onClick:W(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(m(),x("div",{key:0,ref:"headerRef",class:c([e.ns.e("header"),{"show-close":e.showClose}])},[B("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:M(()=>[(m(),w(F(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),B("span",null,K(e.title),1)],2),e.showClose?(m(),x("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:q(W(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[A(i,{class:c(e.ns.e("close"))},{default:M(()=>[(m(),w(F(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):V("v-if",!0)],2)):V("v-if",!0),B("div",{id:e.contentId,class:c(e.ns.e("content"))},[B("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:M(()=>[(m(),w(F(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.hasMessage?(m(),x("div",{key:1,class:c(e.ns.e("message"))},[ne(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),w(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),w(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0,textContent:K(e.message)},null,8,["for","textContent"]))])],2)):V("v-if",!0)],2),Q(B("div",{class:c(e.ns.e("input"))},[A(u,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":f=>e.inputValue=f,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:q(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),B("div",{class:c(e.ns.e("errormsg")),style:me({visibility:e.editorErrorMessage?"visible":"hidden"})},K(e.editorErrorMessage),7)],2),[[_,e.showInput]])],10,["id"]),B("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(m(),w(d,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:f=>e.handleAction("cancel"),onKeydown:q(W(f=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:M(()=>[ve(K(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):V("v-if",!0),Q(A(d,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:f=>e.handleAction("confirm"),onKeydown:q(W(f=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:M(()=>[ve(K(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[_,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[_,e.visible]])]),_:3},8,["onAfterLeave"])}var vn=Ye(fn,[["render",mn],["__file","index.vue"]]);const U=new Map,pn=e=>{let n=document.body;return e.appendTo&&(le(e.appendTo)&&(n=document.querySelector(e.appendTo)),ye(e.appendTo)&&(n=e.appendTo),ye(n)||(n=document.body)),n},gn=(e,n,a=null)=>{const l=A(vn,e,se(e.message)||Ie(e.message)?{default:se(e.message)?e.message:()=>e.message}:null);return l.appContext=a,Se(l,n),pn(e).appendChild(n.firstElementChild),l.component},hn=()=>document.createElement("div"),yn=(e,n)=>{const a=hn();e.onVanish=()=>{Se(null,a),U.delete(s)},e.onAction=t=>{const i=U.get(s);let u;e.showInput?u={value:s.inputValue,action:t}:u=t,e.callback?e.callback(u,l.proxy):t==="cancel"||t==="close"?e.distinguishCancelAndClose&&t!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(u)};const l=gn(e,a,n),s=l.proxy;for(const t in e)he(e,t)&&!he(s.$props,t)&&(t==="closeIcon"&&Le(e[t])?s[t]=te(e[t]):s[t]=e[t]);return s.visible=!0,s};function D(e,n=null){if(!Te)return Promise.reject();let a;return le(e)||Ie(e)?e={message:e}:a=e.callback,new Promise((l,s)=>{const t=yn(e,n??D._context);U.set(t,{options:e,callback:a,resolve:l,reject:s})})}const bn=["alert","confirm","prompt"],Cn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};bn.forEach(e=>{D[e]=En(e)});function En(e){return(n,a,l,s)=>{let t="";return Le(a)?(l=a,t=""):Ze(a)?t="":t=a,D(Object.assign({title:t,message:n,type:"",...Cn[e]},l,{boxType:e}),s)}}D.close=()=>{U.forEach((e,n)=>{n.doClose()}),U.clear()};D._context=null;const T=D;T.install=e=>{T._context=e._context,e.config.globalProperties.$msgbox=T,e.config.globalProperties.$messageBox=T,e.config.globalProperties.$alert=T.alert,e.config.globalProperties.$confirm=T.confirm,e.config.globalProperties.$prompt=T.prompt};const In=T;export{In as E,rn as a,cn as b,Oe as c,un as u};
