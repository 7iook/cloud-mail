const n=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g;function h(e){return["FROM","MAIL","SEND","DEAR","BEST","TEAM","INFO","HELP","USER","NAME","TIME","DATE","YEAR","MONTH","WEEK","DAYS"].includes(e.toUpperCase())}function p(e,a={}){if(!e||typeof e!="string")return e;const{highlightEmails:c=!0,highlightCodes:g=!0}=a;let t=e.replace(/<span[^>]*class="[^"]*highlight[^"]*"[^>]*>([^<]*)<\/span>/g,"$1").replace(/<\/?span[^>]*>/g,"").replace(/[^>]*"\s*title="[^"]*">/g,"").replace(/[^>]*"\s*data-[^=]*="[^"]*">/g,"").replace(/[^>]*"\s*class="[^"]*">/g,"").replace(/\d+"\s*title="[^"]*">\d+/g,i=>{const s=i.match(/\d+/g);return s?s[0]:i}).replace(/<[^>]*>/g,"").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return t.includes('class="email-highlight"')||t.includes('class="code-highlight"')||(c&&(t=t.replace(n,i=>`<span class="email-highlight" data-type="email" data-value="${i.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="点击复制邮箱地址">${i}</span>`)),g&&[/\b[A-Z0-9]{4,8}\b/g,/\b\d{4,8}\b/g].forEach(s=>{t=t.replace(s,l=>!h(l)&&l.length>=4&&!(t.includes('<span class="code-highlight"')&&t.includes(`>${l}</span>`))?`<span class="code-highlight" data-type="code" data-value="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="点击复制验证码">${l}</span>`:l)})),t}function d(e){let a=null;if(e.classList.contains("email-highlight")||e.classList.contains("code-highlight")?a=e:a=e.closest(".email-highlight, .code-highlight"),a){const c=a.getAttribute("data-value");if(c)return c;const g=a.textContent?.trim();if(g)return g}return null}function u(e){return e.classList.contains("email-highlight")||e.classList.contains("code-highlight")||e.closest(".email-highlight, .code-highlight")!==null}export{d as e,p as h,u as i};
