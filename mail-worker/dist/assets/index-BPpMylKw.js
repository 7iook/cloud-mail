import{b as Pe,d as Ie,_ as fe,a as J,u as Bt,c as ie,e as x,o as m,f as me,g as r,n as N,h as n,r as le,i as X,t as w,j as Ve,w as Ge,k as Lt,l as V,m as ye,E as de,p as j,q as f,s as ut,T as Ft,v as xe,x as Rt,y as Re,z as ze,A as S,B as Wt,C as Ut,D as dt,F as ge,G as pe,H as qe,I as Je,J as _e,K as Se,L as G,M as mt,N as $e,O as ne,P as pt,Q as he,R as it,S as Me,U as ft,V as qt,W as Ht,X as Yt,Y as rt,Z as Kt,$ as Gt,a0 as Jt,a1 as Ce,a2 as Xt,a3 as Zt,a4 as Ee,a5 as Xe,a6 as Ze,a7 as d,a8 as ue,a9 as je,aa as Qe,ab as Be,ac as ae,ad as ee,ae as vt,af as Ne,ag as ke,ah as Qt,ai as en,aj as tn,ak as nn,al as sn,am as on,an as Te}from"./index-92mnh-J5.js";import{E as ht}from"./el-scrollbar-lgMH0mZQ.js";import"./el-tooltip-l0sNRNKZ.js";import{E as gt,a as an}from"./el-tag-Dck20whD.js";import{I as D}from"./iconify-VCTUy_UH.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{t as Ae,f as ln,E as yt}from"./vnode-DfneDD37.js";import{E as rn}from"./index-03zk_vof.js";import{T as cn,E as et}from"./index-CG9L6tLM.js";import{t as Oe,d as un}from"./index-ChZfA3gH.js";import{C as dn,E as mn,a as pn}from"./el-select-DGaDXl_M.js";/* empty css                  *//* empty css                        */import{E as _t,a as bt,b as wt}from"./el-dropdown-item-CgMmokvT.js";import{l as fn}from"./login-axc5DUUL.js";import{c as kt}from"./clipboard-utils-Bf-9Um4a.js";import{s as vn,f as hn}from"./day-DI1_lKIq.js";import{s as gn,E as yn}from"./time-utils-8_bD8pZw.js";import{E as _n}from"./el-overlay-jTA8uYnN.js";/* empty css                 */import{E as bn}from"./el-empty-CKfYwwv3.js";import{E as wn,a as kn}from"./el-skeleton-item-UTnpAQ6A.js";import{a as $n,b as Cn,c as En,d as Mn}from"./account-D0SRpcz3.js";import{i as $t}from"./verify-utils-D6Av2NDy.js";/* empty css                       */import{E as He}from"./index-B-u1Rqw0.js";import{E as Ye}from"./index-BZ5UP91G.js";import{E as In}from"./el-input-tag-JYlVIT1L.js";import{l as Sn}from"./index-UYGPyXpS.js";import{c as xn,f as Tn,a as Nn}from"./file-utils-BfzHgCq1.js";import{e as An}from"./email-CA6wn_3x.js";import{u as zn}from"./email-9j19DGMK.js";import{g as On}from"./icon-utils-C4KSwKAn.js";import{u as Dn,d as ct}from"./db-DUC9dwwC.js";import{d as Pn}from"./dayjs.min-BodJrPHb.js";import"./throttle-BQKBmdXm.js";import"./validator-Cw4sOcG_.js";const Vn=Pe({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Ie([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:void 0}}),jn=J({name:"ElCard"}),Bn=J({...jn,props:Vn,setup(o){const t=Bt("card"),s=ie("card");return(e,a)=>{var p;return m(),x("div",{class:N([n(s).b(),n(s).is(`${e.shadow||((p=n(t))==null?void 0:p.shadow)||"always"}-shadow`)])},[e.$slots.header||e.header?(m(),x("div",{key:0,class:N([n(s).e("header"),e.headerClass])},[le(e.$slots,"header",{},()=>[X(w(e.header),1)])],2)):me("v-if",!0),r("div",{class:N([n(s).e("body"),e.bodyClass]),style:Ve(e.bodyStyle)},[le(e.$slots,"default")],6),e.$slots.footer||e.footer?(m(),x("div",{key:1,class:N([n(s).e("footer"),e.footerClass])},[le(e.$slots,"footer",{},()=>[X(w(e.footer),1)])],2)):me("v-if",!0)],2)}}});var Ln=fe(Bn,[["__file","card.vue"]]);const Fn=Ge(Ln),Rn=J({name:"ElContainer"}),Wn=J({...Rn,props:{direction:{type:String}},setup(o){const t=o,s=Lt(),e=ie("container"),a=V(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:s&&s.default?s.default().some(v=>{const M=v.type.name;return M==="ElHeader"||M==="ElFooter"}):!1);return(p,v)=>(m(),x("section",{class:N([n(e).b(),n(e).is("vertical",n(a))])},[le(p.$slots,"default")],2))}});var Un=fe(Wn,[["__file","container.vue"]]);const qn=J({name:"ElAside"}),Hn=J({...qn,props:{width:{type:String,default:null}},setup(o){const t=o,s=ie("aside"),e=V(()=>t.width?s.cssVarBlock({width:t.width}):{});return(a,p)=>(m(),x("aside",{class:N(n(s).b()),style:Ve(n(e))},[le(a.$slots,"default")],6))}});var Ct=fe(Hn,[["__file","aside.vue"]]);const Yn=J({name:"ElFooter"}),Kn=J({...Yn,props:{height:{type:String,default:null}},setup(o){const t=o,s=ie("footer"),e=V(()=>t.height?s.cssVarBlock({height:t.height}):{});return(a,p)=>(m(),x("footer",{class:N(n(s).b()),style:Ve(n(e))},[le(a.$slots,"default")],6))}});var Et=fe(Kn,[["__file","footer.vue"]]);const Gn=J({name:"ElHeader"}),Jn=J({...Gn,props:{height:{type:String,default:null}},setup(o){const t=o,s=ie("header"),e=V(()=>t.height?s.cssVarBlock({height:t.height}):{});return(a,p)=>(m(),x("header",{class:N(n(s).b()),style:Ve(n(e))},[le(a.$slots,"default")],6))}});var Mt=fe(Jn,[["__file","header.vue"]]);const Xn=J({name:"ElMain"}),Zn=J({...Xn,setup(o){const t=ie("main");return(s,e)=>(m(),x("main",{class:N(n(t).b())},[le(s.$slots,"default")],2))}});var It=fe(Zn,[["__file","main.vue"]]);const Qn=Ge(Un,{Aside:Ct,Footer:Et,Header:Mt,Main:It}),es=ye(Ct);ye(Et);const ts=ye(Mt),ns=ye(It);let ss=class{constructor(t,s){this.parent=t,this.domNode=s,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,s=>{s.addEventListener("keydown",e=>{let a=!1;switch(e.code){case de.down:{this.gotoSubIndex(this.subIndex+1),a=!0;break}case de.up:{this.gotoSubIndex(this.subIndex-1),a=!0;break}case de.tab:{Ae(t,"mouseleave");break}case de.enter:case de.numpadEnter:case de.space:{a=!0,e.currentTarget.click();break}}return a&&(e.preventDefault(),e.stopPropagation()),!1})})}},os=class{constructor(t,s){this.domNode=t,this.submenu=null,this.submenu=null,this.init(s)}init(t){this.domNode.setAttribute("tabindex","0");const s=this.domNode.querySelector(`.${t}-menu`);s&&(this.submenu=new ss(this,s)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let s=!1;switch(t.code){case de.down:{Ae(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),s=!0;break}case de.up:{Ae(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),s=!0;break}case de.tab:{Ae(t.currentTarget,"mouseleave");break}case de.enter:case de.numpadEnter:case de.space:{s=!0,t.currentTarget.click();break}}s&&t.preventDefault()})}},as=class{constructor(t,s){this.domNode=t,this.init(s)}init(t){const s=this.domNode.childNodes;Array.from(s).forEach(e=>{e.nodeType===1&&new os(e,t)})}};const ls=J({name:"ElMenuCollapseTransition"}),is=J({...ls,setup(o){const t=ie("menu"),s={onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,a){xe(e,`${t.namespace.value}-opacity-transition`),e.style.opacity="1",a()},onAfterEnter(e){Re(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),Rt(e,t.m("collapse"))?(Re(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),xe(e,t.m("collapse"))):(xe(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),Re(e,t.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){xe(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}};return(e,a)=>(m(),j(Ft,ut({mode:"out-in"},n(s)),{default:f(()=>[le(e.$slots,"default")]),_:3},16))}});var rs=fe(is,[["__file","menu-collapse-transition.vue"]]);function St(o,t){const s=V(()=>{let a=o.parent;const p=[t.value];for(;a.type.name!=="ElMenu";)a.props.index&&p.unshift(a.props.index),a=a.parent;return p});return{parentMenu:V(()=>{let a=o.parent;for(;a&&!["ElMenu","ElSubMenu"].includes(a.type.name);)a=a.parent;return a}),indexPath:s}}function cs(o){return V(()=>{const s=o.backgroundColor;return s?new cn(s).shade(20).toString():""})}const xt=(o,t)=>{const s=ie("menu");return V(()=>s.cssVarBlock({"text-color":o.textColor||"","hover-text-color":o.textColor||"","bg-color":o.backgroundColor||"","hover-bg-color":cs(o).value||"","active-color":o.activeTextColor||"",level:`${t}`}))},tt="rootMenu",De="subMenu:",us=Pe({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Me},expandOpenIcon:{type:Me},collapseCloseIcon:{type:Me},collapseOpenIcon:{type:Me}}),We="ElSubMenu";var nt=J({name:We,props:us,setup(o,{slots:t,expose:s}){const e=Je(),{indexPath:a,parentMenu:p}=St(e,V(()=>o.index)),v=ie("menu"),M=ie("sub-menu"),l=ze(tt);l||Oe(We,"can not inject root menu");const c=ze(`${De}${p.value.uid}`);c||Oe(We,"can not inject sub menu");const E=S({}),P=S({});let C;const O=S(!1),I=S(),i=S(),re=V(()=>A.value==="horizontal"&&H.value?"bottom-start":"right-start"),se=V(()=>A.value==="horizontal"&&H.value||A.value==="vertical"&&!l.props.collapse?o.expandCloseIcon&&o.expandOpenIcon?_.value?o.expandOpenIcon:o.expandCloseIcon:Wt:o.collapseCloseIcon&&o.collapseOpenIcon?_.value?o.collapseOpenIcon:o.collapseCloseIcon:Ut),H=V(()=>c.level===0),T=V(()=>{const y=o.teleported;return dt(y)?H.value:y}),te=V(()=>l.props.collapse?`${v.namespace.value}-zoom-in-left`:`${v.namespace.value}-zoom-in-top`),Z=V(()=>A.value==="horizontal"&&H.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),_=V(()=>l.openedMenus.includes(o.index)),k=V(()=>[...Object.values(E.value),...Object.values(P.value)].some(({active:y})=>y)),A=V(()=>l.props.mode),R=V(()=>l.props.persistent),Y=ge({index:o.index,indexPath:a,active:k}),K=xt(l.props,c.level+1),oe=V(()=>{var y;return(y=o.popperOffset)!=null?y:l.props.popperOffset}),Q=V(()=>{var y;return(y=o.popperClass)!=null?y:l.props.popperClass}),u=V(()=>{var y;return(y=o.showTimeout)!=null?y:l.props.showTimeout}),L=V(()=>{var y;return(y=o.hideTimeout)!=null?y:l.props.hideTimeout}),q=()=>{var y,F,W;return(W=(F=(y=i.value)==null?void 0:y.popperRef)==null?void 0:F.popperInstanceRef)==null?void 0:W.destroy()},g=y=>{y||q()},b=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||o.disabled||l.handleSubMenuClick({index:o.index,indexPath:a.value,active:k.value})},$=(y,F=u.value)=>{var W;if(y.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||o.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,C?.(),{stop:C}=it(()=>{l.openMenu(o.index,a.value)},F),T.value&&((W=p.value.vnode.el)==null||W.dispatchEvent(new MouseEvent("mouseenter")))}},B=(y=!1)=>{var F;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}C?.(),c.mouseInChild.value=!1,{stop:C}=it(()=>!O.value&&l.closeMenu(o.index,a.value),L.value),T.value&&y&&((F=c.handleMouseleave)==null||F.call(c,!0))};pe(()=>l.props.collapse,y=>g(!!y));{const y=W=>{P.value[W.index]=W},F=W=>{delete P.value[W.index]};qe(`${De}${e.uid}`,{addSubMenu:y,removeSubMenu:F,handleMouseleave:B,mouseInChild:O,level:c.level+1})}return s({opened:_}),_e(()=>{l.addSubMenu(Y),c.addSubMenu(Y)}),Se(()=>{c.removeSubMenu(Y),l.removeSubMenu(Y)}),()=>{var y;const F=[(y=t.title)==null?void 0:y.call(t),G(mt,{class:M.e("icon-arrow"),style:{transform:_.value?o.expandCloseIcon&&o.expandOpenIcon||o.collapseCloseIcon&&o.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>$e(se.value)?G(e.appContext.components[se.value]):G(se.value)})],W=l.isMenuPopup?G(gt,{ref:i,visible:_.value,effect:"light",pure:!0,offset:oe.value,showArrow:!1,persistent:R.value,popperClass:Q.value,placement:re.value,teleported:T.value,fallbackPlacements:Z.value,transition:te.value,gpuAcceleration:!1},{content:()=>{var h;return G("div",{class:[v.m(A.value),v.m("popup-container"),Q.value],onMouseenter:z=>$(z,100),onMouseleave:()=>B(!0),onFocus:z=>$(z,100)},[G("ul",{class:[v.b(),v.m("popup"),v.m(`popup-${re.value}`)],style:K.value},[(h=t.default)==null?void 0:h.call(t)])])},default:()=>G("div",{class:M.e("title"),onClick:b},F)}):G(he,{},[G("div",{class:M.e("title"),ref:I,onClick:b},F),G(rn,{},{default:()=>{var h;return ne(G("ul",{role:"menu",class:[v.b(),v.m("inline")],style:K.value},[(h=t.default)==null?void 0:h.call(t)]),[[pt,_.value]])}})]);return G("li",{class:[M.b(),M.is("active",k.value),M.is("opened",_.value),M.is("disabled",o.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:_.value,onMouseenter:$,onMouseleave:()=>B(),onFocus:$},[W])}}});const ds=Pe({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ie(Array),default:()=>Jt([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Me,default:()=>Gt},popperEffect:{type:Ie(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),Ue=o=>ft(o)&&o.every(t=>$e(t)),ms={close:(o,t)=>$e(o)&&Ue(t),open:(o,t)=>$e(o)&&Ue(t),select:(o,t,s,e)=>$e(o)&&Ue(t)&&qt(s)&&(dt(e)||e instanceof Promise)};var ps=J({name:"ElMenu",props:ds,emits:ms,setup(o,{emit:t,slots:s,expose:e}){const a=Je(),p=a.appContext.config.globalProperties.$router,v=S(),M=S(),l=ie("menu"),c=ie("sub-menu");let E=64;const P=S(-1),C=S(o.defaultOpeneds&&!o.collapse?o.defaultOpeneds.slice(0):[]),O=S(o.defaultActive),I=S({}),i=S({}),re=V(()=>o.mode==="horizontal"||o.mode==="vertical"&&o.collapse),se=()=>{const g=O.value&&I.value[O.value];if(!g||o.mode==="horizontal"||o.collapse)return;g.indexPath.forEach($=>{const B=i.value[$];B&&H($,B.indexPath)})},H=(g,b)=>{C.value.includes(g)||(o.uniqueOpened&&(C.value=C.value.filter($=>b.includes($))),C.value.push(g),t("open",g,b))},T=g=>{const b=C.value.indexOf(g);b!==-1&&C.value.splice(b,1)},te=(g,b)=>{T(g),t("close",g,b)},Z=({index:g,indexPath:b})=>{C.value.includes(g)?te(g,b):H(g,b)},_=g=>{(o.mode==="horizontal"||o.collapse)&&(C.value=[]);const{index:b,indexPath:$}=g;if(!(rt(b)||rt($)))if(o.router&&p){const B=g.route||b,y=p.push(B).then(F=>(F||(O.value=b),F));t("select",b,$,{index:b,indexPath:$,route:B},y)}else O.value=b,t("select",b,$,{index:b,indexPath:$})},k=g=>{var b;const $=I.value,B=$[g]||O.value&&$[O.value]||$[o.defaultActive];O.value=(b=B?.index)!=null?b:g},A=g=>{const b=getComputedStyle(g),$=Number.parseInt(b.marginLeft,10),B=Number.parseInt(b.marginRight,10);return g.offsetWidth+$+B||0},R=()=>{var g,b;if(!v.value)return-1;const $=Array.from((b=(g=v.value)==null?void 0:g.childNodes)!=null?b:[]).filter(ce=>ce.nodeName!=="#comment"&&(ce.nodeName!=="#text"||ce.nodeValue)),B=getComputedStyle(v.value),y=Number.parseInt(B.paddingLeft,10),F=Number.parseInt(B.paddingRight,10),W=v.value.clientWidth-y-F;let h=0,z=0;return $.forEach((ce,be)=>{h+=A(ce),h<=W-E&&(z=be+1)}),z===$.length?-1:z},Y=g=>i.value[g].indexPath,K=(g,b=33.34)=>{let $;return()=>{$&&clearTimeout($),$=setTimeout(()=>{g()},b)}};let oe=!0;const Q=()=>{const g=Kt(M);if(g&&(E=A(g)||64),P.value===R())return;const b=()=>{P.value=-1,Ce(()=>{P.value=R()})};oe?b():K(b)(),oe=!1};pe(()=>o.defaultActive,g=>{I.value[g]||(O.value=""),k(g)}),pe(()=>o.collapse,g=>{g&&(C.value=[])}),pe(I.value,se);let u;Ht(()=>{o.mode==="horizontal"&&o.ellipsis?u=Yt(v,Q).stop:u?.()});const L=S(!1);{const g=y=>{i.value[y.index]=y},b=y=>{delete i.value[y.index]};qe(tt,ge({props:o,openedMenus:C,items:I,subMenus:i,activeIndex:O,isMenuPopup:re,addMenuItem:y=>{I.value[y.index]=y},removeMenuItem:y=>{delete I.value[y.index]},addSubMenu:g,removeSubMenu:b,openMenu:H,closeMenu:te,handleMenuItemClick:_,handleSubMenuClick:Z})),qe(`${De}${a.uid}`,{addSubMenu:g,removeSubMenu:b,mouseInChild:L,level:0})}_e(()=>{o.mode==="horizontal"&&new as(a.vnode.el,l.namespace.value)}),e({open:b=>{const{indexPath:$}=i.value[b];$.forEach(B=>H(B,$))},close:T,updateActiveIndex:k,handleResize:Q});const q=xt(o,0);return()=>{var g,b;let $=(b=(g=s.default)==null?void 0:g.call(s))!=null?b:[];const B=[];if(o.mode==="horizontal"&&v.value){const W=ln($).filter(ce=>ce?.shapeFlag!==8),h=P.value===-1?W:W.slice(0,P.value),z=P.value===-1?[]:W.slice(P.value);z?.length&&o.ellipsis&&($=h,B.push(G(nt,{ref:M,index:"sub-menu-more",class:c.e("hide-arrow"),popperOffset:o.popperOffset},{title:()=>G(mt,{class:c.e("icon-more")},{default:()=>G(o.ellipsisIcon)}),default:()=>z})))}const y=o.closeOnClickOutside?[[dn,()=>{C.value.length&&(L.value||(C.value.forEach(W=>t("close",W,Y(W))),C.value=[]))}]]:[],F=ne(G("ul",{key:String(o.collapse),role:"menubar",ref:v,style:q.value,class:{[l.b()]:!0,[l.m(o.mode)]:!0,[l.m("collapse")]:o.collapse}},[...$,...B]),y);return o.collapseTransition&&o.mode==="vertical"?G(rs,()=>F):F}}});const fs=Pe({index:{type:Ie([String,null]),default:null},route:{type:Ie([String,Object])},disabled:Boolean}),vs={click:o=>$e(o.index)&&ft(o.indexPath)},Ke="ElMenuItem",hs=J({name:Ke}),gs=J({...hs,props:fs,emits:vs,setup(o,{expose:t,emit:s}){const e=o;Xt(e.index)&&un();const a=Je(),p=ze(tt),v=ie("menu"),M=ie("menu-item");p||Oe(Ke,"can not inject root menu");const{parentMenu:l,indexPath:c}=St(a,Zt(e,"index")),E=ze(`${De}${l.value.uid}`);E||Oe(Ke,"can not inject sub menu");const P=V(()=>e.index===p.activeIndex),C=ge({index:e.index,indexPath:c,active:P}),O=()=>{e.disabled||(p.handleMenuItemClick({index:e.index,indexPath:c.value,route:e.route}),s("click",C))};return _e(()=>{E.addSubMenu(C),p.addMenuItem(C)}),Se(()=>{E.removeSubMenu(C),p.removeMenuItem(C)}),t({parentMenu:l,rootMenu:p,active:P,nsMenu:v,nsMenuItem:M,handleClick:O}),(I,i)=>(m(),x("li",{class:N([n(M).b(),n(M).is("active",n(P)),n(M).is("disabled",I.disabled)]),role:"menuitem",tabindex:"-1",onClick:O},[n(l).type.name==="ElMenu"&&n(p).props.collapse&&I.$slots.title?(m(),j(n(gt),{key:0,effect:n(p).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:n(p).props.persistent},{content:f(()=>[le(I.$slots,"title")]),default:f(()=>[r("div",{class:N(n(v).be("tooltip","trigger"))},[le(I.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(m(),x(he,{key:1},[le(I.$slots,"default"),le(I.$slots,"title")],64))],2))}});var Tt=fe(gs,[["__file","menu-item.vue"]]);const ys={title:String},_s=J({name:"ElMenuItemGroup"}),bs=J({..._s,props:ys,setup(o){const t=ie("menu-item-group");return(s,e)=>(m(),x("li",{class:N(n(t).b())},[r("div",{class:N(n(t).e("title"))},[s.$slots.title?le(s.$slots,"title",{key:1}):(m(),x(he,{key:0},[X(w(s.title),1)],64))],2),r("ul",null,[le(s.$slots,"default")])],2))}});var Nt=fe(bs,[["__file","menu-item-group.vue"]]);const ws=Ge(ps,{MenuItem:Tt,MenuItemGroup:Nt,SubMenu:nt}),ks=ye(Tt);ye(Nt);ye(nt);const $s={class:"title"},Cs={class:"menu-name",style:{"margin-left":"21px"}},Es={class:"menu-name",style:{"margin-left":"21px"}},Ms={class:"menu-name",style:{"margin-left":"22px"}},Is={class:"menu-name",style:{"margin-left":"21px"}},Ss={class:"menu-name",style:{"margin-left":"21px"}},xs={class:"manage-title"},Ts={class:"menu-name",style:{"margin-left":"18px"}},Ns={class:"menu-name",style:{"margin-left":"21px"}},As={class:"menu-name",style:{"margin-left":"20px"}},zs={class:"menu-name",style:{"margin-left":"20px"}},Os={class:"menu-name",style:{"margin-left":"20px"}},Ds={class:"menu-name",style:{"margin-left":"22px"}},Ps={__name:"index",setup(o){const t=Ee(),s=Xe();return(e,a)=>{const p=ks,v=ws,M=ht,l=Ze("perm");return m(),j(M,{class:"scroll"},{default:f(()=>[r("div",null,[r("div",$s,[d(n(D),{icon:"mdi:email-outline",width:"24",height:"24"}),r("div",null,w(n(t).settings.title),1)]),d(v,{collapse:!1,"text-color":"#fff","active-text-color":"#fff",style:{"margin-top":"10px"}},{default:f(()=>[d(p,{onClick:a[0]||(a[0]=c=>n(ue).push({name:"email"})),index:"email",class:N(n(s).meta.name==="email"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"hugeicons:mailbox-01",width:"20",height:"20"}),r("span",Cs,w(e.$t("inbox")),1)]),_:1},8,["class"]),ne((m(),j(p,{onClick:a[1]||(a[1]=c=>n(ue).push({name:"send"})),index:"send",class:N(n(s).meta.name==="send"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"cil:send",width:"20",height:"20"}),r("span",Es,w(e.$t("sent")),1)]),_:1},8,["class"])),[[l,"email:send"]]),ne((m(),j(p,{onClick:a[2]||(a[2]=c=>n(ue).push({name:"draft"})),index:"draft",class:N(n(s).meta.name==="draft"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"ep:document",width:"19",height:"19"}),r("span",Ms,w(e.$t("drafts")),1)]),_:1},8,["class"])),[[l,"email:send"]]),d(p,{onClick:a[3]||(a[3]=c=>n(ue).push({name:"star"})),index:"star",class:N(n(s).meta.name==="star"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"solar:star-line-duotone",width:"20",height:"20"}),r("span",Is,w(e.$t("starred")),1)]),_:1},8,["class"]),d(p,{onClick:a[4]||(a[4]=c=>n(ue).push({name:"setting"})),index:"setting",class:N(n(s).meta.name==="setting"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"fluent:settings-48-regular",width:"20",height:"20"}),r("span",Ss,w(e.$t("settings")),1)]),_:1},8,["class"]),ne((m(),x("div",xs,[r("div",null,w(e.$t("manage")),1)])),[[l,["all-email:query","user:query","role:query","setting:query","analysis:query","reg-key:query","share:create"]]]),ne((m(),j(p,{onClick:a[5]||(a[5]=c=>n(ue).push({name:"analysis"})),index:"analysis",class:N(n(s).meta.name==="analysis"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"fluent:data-pie-20-regular",width:"24",height:"24"}),r("span",Ts,w(e.$t("analytics")),1)]),_:1},8,["class"])),[[l,"analysis:query"]]),ne((m(),j(p,{onClick:a[6]||(a[6]=c=>n(ue).push({name:"share"})),index:"share",class:N(n(s).meta.name==="share"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"material-symbols:share",width:"20",height:"20"}),a[12]||(a[12]=r("span",{class:"menu-name",style:{"margin-left":"21px"}},"邮件分享",-1))]),_:1},8,["class"])),[[l,"share:create"]]),ne((m(),j(p,{onClick:a[7]||(a[7]=c=>n(ue).push({name:"user"})),index:"setting",class:N(n(s).meta.name==="user"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"si:user-alt-2-line",width:"20",height:"20"}),r("span",Ns,w(e.$t("allUsers")),1)]),_:1},8,["class"])),[[l,"user:query"]]),ne((m(),j(p,{onClick:a[8]||(a[8]=c=>n(ue).push({name:"all-email"})),index:"all-email",class:N(n(s).meta.name==="all-email"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"fluent:mail-list-28-regular",width:"22",height:"22"}),r("span",As,w(e.$t("allMail")),1)]),_:1},8,["class"])),[[l,"all-email:query"]]),ne((m(),j(p,{onClick:a[9]||(a[9]=c=>n(ue).push({name:"role"})),index:"setting",class:N(n(s).meta.name==="role"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"fluent:lock-closed-16-regular",width:"22",height:"22"}),r("span",zs,w(e.$t("permissions")),1)]),_:1},8,["class"])),[[l,"role:query"]]),ne((m(),j(p,{onClick:a[10]||(a[10]=c=>n(ue).push({name:"reg-key"})),index:"reg-key",class:N(n(s).meta.name==="reg-key"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"fluent:fingerprint-20-filled",width:"22",height:"22"}),r("span",Os,w(e.$t("inviteCode")),1)]),_:1},8,["class"])),[[l,"reg-key:query"]]),ne((m(),j(p,{onClick:a[11]||(a[11]=c=>n(ue).push({name:"sys-setting"})),index:"sys-setting",class:N(n(s).meta.name==="sys-setting"?"choose-item":"")},{default:f(()=>[d(n(D),{icon:"eos-icons:system-ok-outlined",width:"18",height:"18",style:{"margin-left":"2px"}}),r("span",Ds,w(e.$t("SystemSettings")),1)]),_:1},8,["class"])),[[l,"setting:query"]])]),_:1})])]),_:1})}}},Vs=ve(Ps,[["__scopeId","data-v-c10749e3"]]),js={__name:"index",props:{isActive:{type:Boolean,default:!1}},setup(o,{emit:t}){const s=t,e=()=>{s("toggleClick")};return(a,p)=>(m(),x("div",{style:{padding:"0 15px",cursor:"pointer"},onClick:e},[(m(),x("svg",{class:N([{"is-active":o.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor"},[...p[0]||(p[0]=[r("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)])],2))]))}},Bs=ve(js,[["__scopeId","data-v-b2fb0d8c"]]),Ls={class:"header-btn"},Fs={class:"breadcrumb-item"},Rs={class:"writer"},Ws={class:"toolbar"},Us={class:"translate icon-item"},qs={class:"avatar-text"},Hs={class:"user-details"},Ys={class:"details-avatar"},Ks={class:"user-name"},Gs={class:"detail-user-type"},Js={class:"action-info"},Xs={style:{"margin-right":"10px"}},Zs={style:{"margin-right":"10px"}},Qs={key:0,style:{"margin-right":"5px"}},eo={key:1,style:{"margin-right":"5px"}},to={class:"logout"},no={__name:"index",setup(o){const{t}=je(),s=Xe(),e=Ee(),a=Qe(),p=Be(),v=S(!1),M=S(!1),l=S({}),c=V(()=>a.user.role.accountCount),E=V(()=>{if(e.settings.send===1)return t("disabled");if(!ae("email:send"))return t("unauthorized");if(a.user.role.sendType==="ban")return t("sendBanned");if(!a.user.role.sendCount)return t("unlimited");if(a.user.role.sendType==="day")return t("daily");if(a.user.role.sendType==="count")return t("total")}),P=V(()=>!ae("email:send")||a.user.role.sendType==="ban"||!a.user.role.sendCount||e.settings.send===1?null:a.user.sendCount+"/"+a.user.role.sendCount);function C(_){M.value?l.value.handleClose():l.value.handleOpen()}async function O(_){try{await kt(_),ee({message:t("copySuccessMsg"),type:"success",plain:!0})}catch(k){console.error(`${t("copyFailMsg")}:`,k),ee({message:t("copyFailMsg"),type:"error",plain:!0})}}function I(_){vn(_==="en"?"en":"zh-cn"),e.lang=_}function i(){p.showNotice()}function re(_){const k=!p.dark,A=document.documentElement;if(!document.startViewTransition){se(k,A);return}const R=_.clientX,Y=_.clientY,K=Math.max(R,window.innerWidth-R),oe=Math.max(Y,window.innerHeight-Y),Q=Math.hypot(K,oe);A.setAttribute("data-theme-to",k?"dark":"light"),A.style.setProperty("--vt-x",`${R}px`),A.style.setProperty("--vt-y",`${Y}px`),A.style.setProperty("--vt-end-radius",`${Q+10}px`),document.startViewTransition(()=>{se(k,A)}).finished.finally(()=>{A.removeAttribute("data-theme-to")})}function se(_,k){k.setAttribute("class",_?"dark":"");const A=document.getElementById("theme-color-meta"),R=!window.matchMedia("(pointer: fine) and (hover: hover)").matches;A.setAttribute("content",_?R?"#141414":"#000000":R?"#FFFFFF":"#F1F1F1"),p.dark=_}function H(){p.writerRef.open()}function T(){p.asideShow=!p.asideShow}function te(){v.value=!0,fn().then(()=>{localStorage.removeItem("token"),ue.replace("/login")}).finally(()=>{v.value=!1})}function Z(_){return _[0]?.toUpperCase()||""}return(_,k)=>{const A=bt,R=_t,Y=wt,K=an,oe=et,Q=Ze("perm");return m(),x("div",{class:N(["header",n(ae)("email:send")?"":"not-send"])},[r("div",Ls,[d(Bs,{onClick:T}),r("span",Fs,w(_.$t(n(s).meta.title)),1)]),ne((m(),x("div",{class:"writer-box",onClick:H},[r("div",Rs,[d(n(D),{icon:"material-symbols:edit-outline-sharp",width:"22",height:"22"})])])),[[Q,"email:send"]]),r("div",Ws,[d(Y,null,{dropdown:f(()=>[d(R,null,{default:f(()=>[d(A,{onClick:k[0]||(k[0]=u=>I("zh"))},{default:f(()=>[...k[7]||(k[7]=[X("简体中文",-1)])]),_:1}),d(A,{onClick:k[1]||(k[1]=u=>I("zhTW"))},{default:f(()=>[...k[8]||(k[8]=[X("繁體中文",-1)])]),_:1}),d(A,{onClick:k[2]||(k[2]=u=>I("en"))},{default:f(()=>[...k[9]||(k[9]=[X("English",-1)])]),_:1})]),_:1})]),default:f(()=>[r("div",Us,[d(n(D),{icon:"carbon:ibm-watson-language-translator"})])]),_:1}),n(p).dark?(m(),x("div",{key:0,class:"sun-icon icon-item",onClick:k[3]||(k[3]=u=>re(u))},[d(n(D),{icon:"mingcute:sun-fill"})])):(m(),x("div",{key:1,class:"dark-icon icon-item",onClick:k[4]||(k[4]=u=>re(u))},[d(n(D),{icon:"solar:moon-linear"})])),r("div",{class:"notice icon-item",onClick:i},[d(n(D),{icon:"streamline-plump:announcement-megaphone"})]),d(Y,{ref_key:"userinfoRef",ref:l,onVisibleChange:k[6]||(k[6]=u=>M.value=u),teleported:!1,"popper-class":"detail-dropdown"},{dropdown:f(()=>[r("div",Hs,[r("div",Ys,w(Z(n(a).user.email)),1),r("div",Ks,w(n(a).user.name),1),r("div",{class:"detail-email",onClick:k[5]||(k[5]=u=>O(n(a).user.email))},w(n(a).user.email),1),r("div",Gs,[d(K,null,{default:f(()=>[X(w(_.$t(n(a).user.role.name)),1)]),_:1})]),r("div",Js,[r("div",null,[r("span",Xs,w(_.$t("sendCount")),1),r("span",Zs,w(_.$t("accountCount")),1)]),r("div",null,[r("div",null,[P.value?(m(),x("span",Qs,w(P.value),1)):me("",!0),n(ae)("email:send")?(m(),j(K,{key:2},{default:f(()=>[X(w(E.value),1)]),_:1})):(m(),j(K,{key:1},{default:f(()=>[X(w(E.value),1)]),_:1}))]),r("div",null,[n(e).settings.manyEmail||n(e).settings.addEmail?(m(),j(K,{key:0},{default:f(()=>[X(w(_.$t("disabled")),1)]),_:1})):c.value&&n(ae)("account:add")?(m(),x("span",eo,w(_.$t("totalUserAccount",{msg:c.value})),1)):!c.value&&n(ae)("account:add")?(m(),j(K,{key:2},{default:f(()=>[X(w(_.$t("unlimited")),1)]),_:1})):n(ae)("account:add")?me("",!0):(m(),j(K,{key:3},{default:f(()=>[X(w(_.$t("unauthorized")),1)]),_:1}))])])]),r("div",to,[d(oe,{type:"primary",loading:v.value,onClick:te},{default:f(()=>[X(w(_.$t("logOut")),1)]),_:1},8,["loading"])])])]),default:f(()=>[r("div",{class:"avatar",onClick:C},[r("div",qs,[r("div",null,w(Z(n(a).user.email)),1)]),d(n(D),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"24",height:"24"})])]),_:1},512)])],2)}}},so=ve(no,[["__scopeId","data-v-2ee3ae82"]]),oo={class:"account-box"},ao={class:"head-opt"},lo={"infinite-scroll-distance":600,"infinite-scroll-immediate":!1},io={class:"account"},ro={class:"opt"},co={style:{display:"flex","justify-content":"space-between"}},uo={style:{display:"flex","justify-content":"space-between"}},mo={key:2,class:"noLoading"},po={key:3,class:"empty"},fo={class:"container"},vo=["data-sitekey"],ho={key:0,style:{"font-size":"12px",color:"#F56C6C"}},go={class:"container"},yo={__name:"index",setup(o){const{t}=je(),s=Qe(),e=vt(),a=Ee(),p=S(!1),v=S(!1),M=a.domainList,l=ge([]),c=S(!1),E=S(!1),P=S(!1),C=S(!1),O=S(!1),I=S(!1),i=S(null),re=S({}),se=S({});let H=null,T=null;const te=S(!1);let Z="",_=0;const k=ge({email:"",suffix:a.domainList[0]});let A=10;const R={accountId:0,size:20},Y=S();ae("account:query")&&F(),pe(()=>e.changeUserAccountName,()=>{l[0].name=e.changeUserAccountName});const K=()=>{Y.value.toggleMenu()};window.onTurnstileError=h=>{_>=4||(_++,console.warn("人机验加载失败",h),setTimeout(()=>{Ce(()=>{T?window.turnstile.reset(T):T=window.turnstile.render(".add-email-turnstile")})},1500))},window.onTurnstileSuccess=h=>{Z=h};function oe(){if(l.length>20)return A=20;if(l.length===0)return A=1;A=l.length}function Q(){let h=i.value;if(h===H.name){O.value=!1;return}if(!h){ee({message:t("emptyUserNameMsg"),type:"error",plain:!0});return}I.value=!0,Mn(H.accountId,h).then(()=>{H.name=h,O.value=!1,H.accountId===s.user.accountId&&(s.user.name=h),ee({message:t("saveSuccessMsg"),type:"success",plain:!0})}).finally(()=>{I.value=!1})}function u(h){i.value=h.name,H=h,O.value=!0}function L(h){return!ae("email:send")&&!(h.accountId!==s.user.accountId&&ae("account:delete"))}function q(h){return e.currentAccountId===h?"item-choose":""}function g(h){He.confirm(t("delConfirm",{msg:h.email}),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Cn(h.accountId).then(()=>{const z=l.findIndex(ce=>ce.accountId===h.accountId);l.splice(z,1),l.length<R.size&&F(),ee({message:t("delSuccessMsg"),type:"success",plain:!0})})})}function b(){E.value||(E.value=!1,P.value=!1,c.value=!1,R.accountId=0,oe(),se.value.setScrollTop(0),l.splice(0,l.length),F())}function $(h){e.currentAccountId=h.accountId,e.currentAccount=h}function B(){p.value=!0,setTimeout(()=>{re.value.focus()},100)}async function y(h){try{await kt(h),ee({message:t("copySuccessMsg"),type:"success",plain:!0})}catch(z){console.error(`${t("copyFailMsg")}:`,z),ee({message:t("copyFailMsg"),type:"error",plain:!0})}}function F(){if(E.value||P.value||c.value)return;l.length===0?E.value=!0:P.value=!0;let h=Date.now();$n(R.accountId,R.size).then(async z=>{let be=Date.now()-h;be<500&&await gn(500-be),z.length<R.size&&(c.value=!0),l.length===0&&(e.currentAccount=z[0].accountId),R.accountId=z.at(-1).accountId,l.push(...z),E.value=!1,P.value=!1}).catch(()=>{E.value=!1,P.value=!1})}function W(){if(!k.email){ee({message:t("emptyEmailMsg"),type:"error",plain:!0});return}if(!$t(k.email+k.suffix)){ee({message:t("notEmailMsg"),type:"error",plain:!0});return}if(!Z&&(a.settings.addEmailVerify===0||a.settings.addEmailVerify===2&&a.settings.addVerifyOpen)){C.value?te.value||ee({message:t("botVerifyMsg"),type:"error",plain:!0}):(C.value=!0,Ce(()=>{if(T)window.turnstile.reset(".add-email-turnstile");else try{T=window.turnstile.render(".add-email-turnstile")}catch{te.value=!0,console.log("人机验证js加载失败")}}));return}v.value=!0,En(k.email+k.suffix,Z).then(h=>{v.value=!1,p.value=!1,k.email="",l.push(h),Z="",a.settings.addVerifyOpen=h.addVerifyOpen,ee({message:t("addSuccessMsg"),type:"success",plain:!0}),C.value=!1,s.refreshUserInfo()}).catch(h=>{h.code===400&&(Z="",T?window.turnstile.reset(T):Ce(()=>{T=window.turnstile.render(".add-email-turnstile")}),C.value=!0),v.value=!1})}return(h,z)=>{const ce=bt,be=_t,At=wt,Le=Fn,we=kn,st=wn,zt=bn,Ot=ht,Dt=pn,Pt=mn,ot=yt,at=et,lt=_n,Vt=Ze("perm"),jt=yn;return m(),x("div",oo,[r("div",ao,[ne(d(n(D),{class:"icon add",icon:"ion:add-outline",width:"23",height:"23",onClick:B},null,512),[[Vt,"account:add"]]),d(n(D),{class:"icon refresh",icon:"ion:reload",width:"18",height:"18",onClick:b})]),d(Ot,{class:"scrollbar",ref_key:"scrollbarRef",ref:se},{default:f(()=>[ne((m(),x("div",lo,[(m(!0),x(he,null,Ne(l,U=>(m(),j(Le,{class:N(["item",q(U.accountId)]),key:U.accountId,onClick:Fe=>$(U)},{default:f(()=>[r("div",io,w(U.email),1),r("div",ro,[r("div",{class:"send-email",onClick:z[0]||(z[0]=ke(()=>{},["stop"]))},[d(n(D),{icon:"eva:email-fill",width:"22",height:"22",color:"#fccb1a"})]),r("div",{class:"settings",onClick:z[1]||(z[1]=ke(()=>{},["stop"]))},[d(n(D),{icon:"fluent-color:clipboard-24",width:"22",height:"22",onClick:ke(Fe=>y(U.email),["stop"])},null,8,["onClick"]),L(U)?(m(),j(n(D),{key:0,icon:"fluent:settings-24-filled",width:"21",height:"21",color:"#909399"})):(m(),j(At,{key:1},{dropdown:f(()=>[d(be,null,{default:f(()=>[n(ae)("email:send")?(m(),j(ce,{key:0,onClick:Fe=>u(U)},{default:f(()=>[X(w(h.$t("rename")),1)]),_:2},1032,["onClick"])):me("",!0),U.accountId!==n(s).user.accountId&&n(ae)("account:delete")?(m(),j(ce,{key:1,onClick:Fe=>g(U)},{default:f(()=>[X(w(h.$t("delete")),1)]),_:2},1032,["onClick"])):me("",!0)]),_:2},1024)]),default:f(()=>[d(n(D),{icon:"fluent:settings-24-filled",width:"21",height:"21",color:"#909399"})]),_:2},1024))])])]),_:2},1032,["class","onClick"]))),128)),E.value?(m(!0),x(he,{key:0},Ne(n(A),U=>(m(),j(st,{key:U,animated:""},{template:f(()=>[d(Le,{class:"item"},{default:f(()=>[d(we,{variant:"p",style:{width:"70%",height:"20px","margin-bottom":"25px"}}),r("div",co,[d(we,{variant:"text",style:{width:"20px"}}),d(we,{variant:"text",style:{width:"20px"}})])]),_:1})]),_:2},1024))),128)):me("",!0),l.length>0&&!c.value?(m(),j(st,{key:1,animated:""},{template:f(()=>[d(Le,{class:"item"},{default:f(()=>[d(we,{variant:"p",style:{width:"70%",height:"20px","margin-bottom":"20px"}}),r("div",uo,[d(we,{variant:"text",style:{width:"20px"}}),d(we,{variant:"text",style:{width:"20px"}})])]),_:1})]),_:1})):me("",!0),c.value&&l.length>0?(m(),x("div",mo,[r("div",null,w(h.$t("noMoreData")),1)])):me("",!0),c.value&&l.length===0?(m(),x("div",po,[d(zt,{description:h.$t("noMessagesFound")},null,8,["description"])])):me("",!0)])),[[jt,F]])]),_:1},512),d(lt,{modelValue:p.value,"onUpdate:modelValue":z[4]||(z[4]=U=>p.value=U),title:h.$t("addAccount")},{default:f(()=>[r("div",fo,[d(ot,{modelValue:k.email,"onUpdate:modelValue":z[3]||(z[3]=U=>k.email=U),ref_key:"addRef",ref:re,type:"text",placeholder:h.$t("emailAccount"),autocomplete:"off"},{append:f(()=>[r("div",{onClick:ke(K,["stop"])},[d(Pt,{ref_key:"mySelect",ref:Y,modelValue:k.suffix,"onUpdate:modelValue":z[2]||(z[2]=U=>k.suffix=U),placeholder:h.$t("select"),class:"select"},{default:f(()=>[(m(!0),x(he,null,Ne(n(M),U=>(m(),j(Dt,{key:U,label:U,value:U},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),r("div",null,[r("span",null,w(k.suffix),1),d(n(D),{class:"setting-icon",icon:"mingcute:down-small-fill",width:"20",height:"20"})])])]),_:1},8,["modelValue","placeholder"]),d(at,{class:"btn",type:"primary",onClick:W,loading:v.value},{default:f(()=>[X(w(h.$t("add")),1)]),_:1},8,["loading"])]),r("div",{class:N(["add-email-turnstile",C.value?"turnstile-show":"turnstile-hide"]),"data-sitekey":n(a).settings.siteKey,"data-callback":"onTurnstileSuccess","data-error-callback":"onTurnstileError"},[te.value?(m(),x("span",ho,w(h.$t("verifyModuleFailed")),1)):me("",!0)],10,vo)]),_:1},8,["modelValue","title"]),d(lt,{modelValue:O.value,"onUpdate:modelValue":z[6]||(z[6]=U=>O.value=U),title:h.$t("changeUserName")},{default:f(()=>[r("div",go,[d(ot,{modelValue:i.value,"onUpdate:modelValue":z[5]||(z[5]=U=>i.value=U),type:"text",placeholder:h.$t("username"),autocomplete:"off"},null,8,["modelValue","placeholder"]),d(at,{class:"btn",type:"primary",onClick:Q,loading:I.value},{default:f(()=>[X(w(h.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"])])}}},_o=ve(yo,[["__scopeId","data-v-8a0cf873"]]),bo={__name:"index",setup(o){const t=Ee(),s=Be(),e=Xe();let a=window.innerWidth,p=null;const v=V(()=>s.accountShow&&t.settings.manyEmail===0);pe(()=>s.changeNotice,()=>{const c=t.settings;let E={notice:c.notice,noticeWidth:c.noticeWidth,noticeTitle:c.noticeTitle,noticeContent:c.noticeContent,noticeType:c.noticeType,noticeDuration:c.noticeDuration,noticePosition:c.noticePosition,noticeOffset:c.noticeOffset};M(E)}),pe(()=>s.changePreview,()=>{M(s.previewData)});function M(c){if(c.notice===1)return;p&&p.close();const E=document.createElement("style");E.innerHTML=`
  .custom-notice.el-notification {
    --el-notification-width: min(${c.noticeWidth}px,calc(100% - 30px)) !important;
  }
  `,document.head.appendChild(E),p=Ye({title:c.noticeTitle,message:`<div style="width: 100%;height: 100%;">${c.noticeContent}</div>`,type:c.noticeType==="none"?"":c.noticeType,duration:c.noticeDuration,position:c.noticePosition,offset:c.noticeOffset,dangerouslyUseHTMLString:!0,customClass:"custom-notice"})}_e(()=>{window.addEventListener("resize",l),l()}),Se(()=>{window.removeEventListener("resize",l)});const l=()=>{["content","email","send"].includes(e.meta.name)&&a!==window.innerWidth&&(a=window.innerWidth,s.accountShow=window.innerWidth>=767)};return(c,E)=>{const P=Qt("router-view");return m(),x("div",{class:N(v.value&&n(ae)("account:query")?"main-box-show":"main-box-hide")},[r("div",{class:N(v.value&&n(ae)("account:query")?"block-show":"block-hide"),onClick:E[0]||(E[0]=C=>n(s).accountShow=!1)},null,2),d(_o,{class:N(v.value&&n(ae)("account:query")?"show":"hide")},null,8,["class"]),d(P,{class:"main-view"},{default:f(({Component:C,route:O})=>[(m(),j(en,{include:["email","send","star"],max:3},[(m(),j(tn(C),{key:O.name}))],1024))]),_:1})],2)}}},wo=ve(bo,[["__scopeId","data-v-7f452b79"]]),ko=["id"],$o={__name:"index",props:{defValue:{type:String,default:""},editorId:{type:String,default:()=>`editor-${Date.now()}`}},emits:["change"],setup(o,{expose:t,emit:s}){t({clearEditor:O,focus:re,getContent:se});const e=o,{locale:a}=je(),p=s,v=nn(null),M=S(!1),l=S(null),c=S(!1),E=Be(),P=Ee();_e(()=>{I()}),Se(()=>{H()}),pe(()=>e.defValue,T=>{v.value&&v.value.getContent()!==T&&v.value.setContent(T)}),pe(()=>[E.dark,P.lang],()=>{H(),i()});const C=V(()=>a.value==="zh"?"zh_CN":a.value==="zhTW"?"zh_TW":"en");function O(){v.value&&v.value.setContent("")}function I(){if(window.tinymce)i();else{c.value=!0;const T=document.createElement("script");T.src="/tinymce/tinymce.min.js",T.onload=()=>i(),document.head.appendChild(T),c.value=!1}}function i(){window.tinymce.init({selector:`#${e.editorId}`,statusbar:!1,height:"100%",auto_focus:!0,forced_root_block:"div",skin:`${E.dark?"oxide-dark":"oxide"}`,content_css:`/tinymce/css/index.css,${E.dark?"dark":"default"}`,content_style:`:root {
         --scrollbar-track-color: ${E.dark?"#141414":"#FFFFFF"};
         --scrollbar-thumb-color: ${E.dark?"#8D9095":"#A8ABB2"};
    }`,plugins:"link image advlist lists  emoticons fullscreen  table preview code",toolbar:"bold emoticons forecolor backcolor italic fontsize | alignleft aligncenter alignright alignjustify | outdent indent |  bullist numlist | link image  | table code preview fullscreen",toolbar_mode:"scrolling",mobile:{toolbar:"fullscreen bold emoticons forecolor backcolor italic fontsize | alignleft aligncenter alignright alignjustify | outdent indent |  bullist numlist | link image  | table code preview "},font_size_formats:"8px 10px 12px 14px 16px 18px 24px 36px",emoticons_search:!1,language:C.value,language_load:!0,menubar:!1,license_key:"gpl",noneditable_class:"mceNonEditable",setup:T=>{v.value=T,T.on("init",()=>{T.setContent(e.defValue),M.value=!0}),T.on("input change",()=>{const te=T.getContent(),Z=T.getContent({format:"text"});p("change",te,Z)})},autofocus:!0,branding:!1,file_picker_types:"image",image_dimensions:!1,image_description:!1,link_title:!1,dialog_type:"none",file_picker_callback:(T,te,Z)=>{const _=document.createElement("input");_.setAttribute("type","file"),_.setAttribute("accept","image/*"),_.addEventListener("change",async k=>{let A=k.target.files[0];A=await xn(A);const R=new FileReader;R.onload=()=>{const Y="blobid"+new Date().getTime(),K=tinymce.activeEditor.editorUpload.blobCache,oe=R.result.split(",")[1],Q=K.create(Y,A,oe);K.add(Q),T(Q.blobUri(),{title:A.name})},R.readAsDataURL(A)}),_.click()}})}function re(){Ce(()=>{v.value.focus()})}function se(){return v.value.getContent()}function H(){v.value&&(v.value.destroy(),v.value=null)}return(T,te)=>(m(),x("div",{class:N(["editor-box",c.value?"editor-box-loading":""])},[c.value?(m(),j(Sn,{key:0,class:"loading"})):(m(),x("textarea",{key:1,style:{outline:"none"},id:o.editorId,ref_key:"editorRef",ref:l},null,8,ko))],2))}},Co=ve($o,[["__scopeId","data-v-33324f14"]]),Eo={class:"percent"},Mo={style:{"margin-left":"5px"}},Io={__name:"index",props:{value:[Number,String],desc:[String]},setup(o){return(t,s)=>(m(),x("div",Eo,[d(n(D),{icon:"line-md:loading-loop",width:"18",height:"18"}),r("div",null,[r("span",null,w(o.value)+"%",1),r("span",Mo,w(o.desc),1)])]))}},So=ve(Io,[["__scopeId","data-v-63e3a566"]]),xo={class:"send"},To={class:"title"},No={class:"title-left"},Ao={class:"title-text"},zo={class:"sender"},Oo={class:"sender-name"},Do={class:"send-email"},Po={class:"container"},Vo={class:"item-title"},jo={class:"item-title"},Bo={class:"button-item"},Lo={class:"att-list"},Fo={class:"att-filename"},Ro={class:"att-size"},Wo={__name:"index",setup(o,{expose:t}){t({open:Y,openReply:A,openDraft:K});const{t:s}=je(),e=Dn(),a=Ee(),p=zn(),v=vt(),M=S({}),l=Qe(),c=S(!1),E=S(0);let P=null,C=!1;const O=S(""),I=ge({receiveEmail:[],subject:"",content:"",sendType:""}),i=ge({sendEmail:"",receiveEmail:[],accountId:-1,manyType:null,name:"",subject:"",content:"",sendType:"",text:"",emailId:0,attachments:[],draftId:null});function re(u){const L=Array.from(new Set(u.split(/[,，]/).map(q=>q.trim()).filter(q=>q)));i.receiveEmail.splice(i.receiveEmail.length-1,1),L.forEach(q=>{$t(q)&&!i.receiveEmail.includes(q)&&i.receiveEmail.push(q)})}function se(){i.manyType=i.manyType?null:"divide"}function H(){He.confirm(s("clearContentConfirm"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{_()})}function T(u){i.attachments.splice(u,1)}function te(){const u=document.createElement("input");u.setAttribute("type","file"),u.click(),u.onchange=async L=>{const q=L.target.files[0],g=q.size,b=q.name,$=q.type;if(i.attachments.reduce((F,W)=>F+W.size,0)+g>29360128){ee({message:s("attLimitMsg"),type:"error",plain:!0});return}const y=await Tn(q);i.attachments.push({content:y,filename:b,size:g,contentType:$})}}async function Z(){if(i.receiveEmail.length===0){ee({message:s("emptyRecipientMsg"),type:"error",plain:!0});return}if(!i.subject){ee({message:s("emptySubjectMsg"),type:"error",plain:!0});return}if(!i.content){ee({message:s("emptyContentMsg"),type:"error",plain:!0});return}if(i.manyType==="divide"&&i.attachments.length>0){ee({message:s("noSeparateSendMsg"),type:"error",plain:!0});return}if(C){ee({message:s("sendingErrorMsg"),type:"error",plain:!0});return}P=ee({message:()=>G(So,{value:E.value,desc:s("sending")}),dangerouslyUseHTMLString:!0,plain:!0,duration:0,customClass:"message-bottom"}),C=!0,c.value=!1,An(i,u=>{E.value=Math.round(u.loaded*98/u.total)}).then(u=>{const L=u[0];u.forEach(q=>{p.sendScroll?.addItem(q)}),Ye({title:s("sendSuccessMsg"),type:"success",message:G("span",{style:"color: teal"},L.subject),position:"bottom-right"}),l.refreshUserInfo(),i.draftId&&(i.subject="",i.content="",i.receiveEmail=[],e.setDraft={...Te(i)}),_(),c.value=!1}).catch(u=>{Ye({title:s("sendFailMsg"),type:u.code===403?"warning":"error",message:G("span",{style:"color: teal"},u.message),position:"bottom-right"}),c.value=!0}).finally(()=>{P.close(),E.value=0,C=!1})}function _(){i.receiveEmail=[],i.subject="",i.content="",i.manyType=null,i.attachments=[],i.sendType="",i.emailId=0,i.draftId=null,I.content="",I.subject="",I.receiveEmail=[],I.sendType="",M.value.clearEditor()}function k(u,L){i.content=u,i.text=L}function A(u){_(),u.subject=u.subject||"",i.receiveEmail.push(u.sendEmail),i.subject=u.subject.startsWith("Re:")||u.subject.startsWith("回复：")?u.subject:"Re: "+u.subject,i.sendType="reply",i.emailId=u.emailId,O.value="",setTimeout(()=>{O.value=`
    <div></div>
    <div>
    <br>
        ${hn(u.createTime)} ${u.name} &lt${u.sendEmail}&gt ${s("wrote")}:
    </div>
    <blockquote class="mceNonEditable" style="margin: 0 0 0 0.8ex;border-left: 1px solid rgb(204,204,204);padding-left: 1ex;">
      <articl>
          ${R(u.content)||`<pre style="font-family: inherit;word-break: break-word;white-space: pre-wrap;margin: 0">${u.text}</pre>`}
      </article>
    </blockquote>`,Y(),Ce(()=>{I.content=M.value.getContent(),I.subject=i.subject,I.receiveEmail=i.receiveEmail,I.sendType=i.sendType})})}function R(u){u=u||"";const L=a.settings.r2Domain;return u.replace(/{{domain}}/g,sn(L)+"/")}function Y(){v.currentAccount.email?(i.sendEmail=v.currentAccount.email,i.accountId=v.currentAccount.accountId,i.name=v.currentAccount.name):(i.sendEmail=l.user.email,i.accountId=l.user.accountId,i.name=l.user.name),c.value=!0,M.value.focus()}function K(u){Object.assign(i,{...u}),O.value="",setTimeout(()=>O.value=i.content),c.value=!0,M.value.focus()}const oe=u=>{u.key==="Escape"&&Q()};_e(()=>{window.addEventListener("keydown",oe)}),on(()=>{window.removeEventListener("keydown",oe)});function Q(){if(i.draftId){e.setDraft={...Te(i)},c.value=!1,_();return}if(!(i.content||i.subject||i.receiveEmail.length>0)){c.value=!1,_();return}if(I.sendType==="reply"){let u=i.subject===I.subject,L=M.value.getContent()===I.content,q=i.receiveEmail.length===1&&i.receiveEmail[0]===I.receiveEmail[0];if(u&&L&&q){_(),Q();return}}He.confirm(s("saveDraftConfirm"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning",distinguishCancelAndClose:!0}).then(async()=>{const u={...Te(i)};delete u.draftId,delete u.attachments,u.createTime=Pn().utc().format("YYYY-MM-DD HH:mm:ss");const L=await ct.value.draft.add({...u});ct.value.att.add({draftId:L,attachments:Te(i.attachments)}),e.refreshList++,c.value=!1,_()}).catch(u=>{u==="cancel"&&(c.value=!1,_())})}return(u,L)=>{const q=In,g=yt,b=et;return ne((m(),x("div",xo,[r("div",{class:"write-box",onClick:L[2]||(L[2]=ke(()=>{},["stop"]))},[r("div",To,[r("div",No,[r("span",Ao,[d(n(D),{icon:"hugeicons:quill-write-01",width:"28",height:"28"})]),r("span",zo,w(u.$t("sender"))+":",1),r("span",Oo,w(i.name),1),r("span",Do,"<"+w(i.sendEmail)+">",1)]),r("div",{onClick:Q,style:{cursor:"pointer"}},[d(n(D),{icon:"material-symbols-light:close-rounded",width:"22",height:"22"})])]),r("div",Po,[d(q,{onAddTag:re,"tag-type":"primary",size:"default",modelValue:i.receiveEmail,"onUpdate:modelValue":L[0]||(L[0]=$=>i.receiveEmail=$),placeholder:u.$t("ruleEmailsInputDesc")},{prefix:f(()=>[r("div",Vo,w(u.$t("recipient")),1)]),suffix:f(()=>[r("span",{class:N(["distribute",i.manyType?"checked":""]),onClick:ke(se,["stop"])},w(u.$t("sendSeparately")),3)]),_:1},8,["modelValue","placeholder"]),d(g,{modelValue:i.subject,"onUpdate:modelValue":L[1]||(L[1]=$=>i.subject=$),placeholder:u.$t("subjectInputDesc")},{prefix:f(()=>[r("div",jo,w(u.$t("subject")),1)]),_:1},8,["modelValue","placeholder"]),d(Co,{"def-value":O.value,ref_key:"editor",ref:M,onChange:k},null,8,["def-value"]),r("div",Bo,[r("div",{class:"att-add",onClick:te},[d(n(D),{icon:"iconamoon:attachment-fill",width:"24",height:"24"})]),r("div",{class:"att-clear",onClick:H},[d(n(D),{icon:"icon-park-outline:clear-format",width:"24",height:"24 "})]),r("div",Lo,[(m(!0),x(he,null,Ne(i.attachments,($,B)=>(m(),x("div",{class:"att-item",key:B},[d(n(D),ut({ref_for:!0},n(On)($.filename)),null,16),r("span",Fo,w($.filename),1),r("span",Ro,w(n(Nn)($.size)),1),d(n(D),{style:{cursor:"pointer"},icon:"material-symbols-light:close-rounded",onClick:y=>T(B),width:"22",height:"22"},null,8,["onClick"])]))),128))]),r("div",null,[i.sendType==="reply"?(m(),j(b,{key:0,type:"primary",onClick:Z},{default:f(()=>[X(w(u.$t("reply")),1)]),_:1})):(m(),j(b,{key:1,type:"primary",onClick:Z},{default:f(()=>[X(w(u.$t("send")),1)]),_:1}))])])])])],512)),[[pt,c.value]])}}},Uo=ve(Wo,[["__scopeId","data-v-87915541"]]),qo={__name:"index",setup(o){const t=Be(),s=S({}),e=S(window.innerWidth<1025),a=()=>{e.value=window.innerWidth<1025,t.asideShow=window.innerWidth>1024};return _e(()=>{t.writerRef=s,window.addEventListener("resize",a),a()}),Se(()=>{window.removeEventListener("resize",a)}),(p,v)=>{const M=es,l=ts,c=ns,E=Qn;return m(),x(he,null,[d(E,{class:"layout"},{default:f(()=>[d(M,{class:N(["aside",n(t).asideShow?"aside-show":"el-aside-hide"])},{default:f(()=>[d(Vs)]),_:1},8,["class"]),r("div",{class:N(n(t).asideShow&&e.value?"overlay-show":"overlay-hide"),onClick:v[0]||(v[0]=P=>n(t).asideShow=!1)},null,2),d(E,{class:"main-container"},{default:f(()=>[d(c,null,{default:f(()=>[d(l,null,{default:f(()=>[d(so)]),_:1}),d(wo)]),_:1})]),_:1})]),_:1}),d(Uo,{ref_key:"writerRef",ref:s},null,512)],64)}}},Aa=ve(qo,[["__scopeId","data-v-3d52550c"]]);export{Aa as default};
