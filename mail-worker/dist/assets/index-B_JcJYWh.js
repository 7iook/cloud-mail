import{aD as Yl,b as xl,d as Be,a0 as et,_ as lt,a as nl,bs as tt,c as ot,by as nt,l as oe,bE as at,A as g,b8 as _e,U as st,G as De,J as it,e as S,o as V,r as Se,f as z,g as e,t as d,h as s,n as Ke,Q as pe,s as Ze,p as J,bg as ut,q as a,bF as Xe,bG as Ye,a1 as ke,ba as dt,N as rt,bH as ct,bI as mt,bJ as pt,w as vt,F as he,a7 as o,i as y,af as $e,j as Ee,ag as xe,a_ as gt,M as ft,b0 as yt,B as ht,b1 as bt,ad as ue,a9 as wt,ae as Vt,aa as kt,a4 as $t,ab as Ct,bK as _t,bL as St,bl as Et,bM as At,ap as el,b2 as Ut,bk as ze,bN as Tt,bO as It,bP as zt}from"./index-92mnh-J5.js";import{E as Kt}from"./el-scrollbar-lgMH0mZQ.js";import{E as Lt,h as Bt}from"./el-table-column-uawMUA32.js";import"./el-checkbox-DpAuy9Ti.js";import"./el-tooltip-l0sNRNKZ.js";import{E as Dt}from"./el-tag-Dck20whD.js";import{a as al,E as sl}from"./el-radio-DGAw60Lp.js";import{E as Ft}from"./el-input-tag-JYlVIT1L.js";import{E as Nt}from"./el-overlay-jTA8uYnN.js";/* empty css                 */import{E as Rt}from"./el-image-viewer-DJ_SH_7Y.js";import{E as Mt}from"./el-input-number-Bip_U3ji.js";/* empty css                  */import{E as Pt,a as Ot}from"./el-select-DGaDXl_M.js";import{E as Wt}from"./el-switch-CaWohBeo.js";import{I as w,d as Gt}from"./iconify-VCTUy_UH.js";import{i as ll}from"./verify-utils-D6Av2NDy.js";import{l as jt}from"./index-UYGPyXpS.js";import{E as Ht}from"./el-splitter-panel-DXpPCo2G.js";import{E as Jt}from"./el-empty-CKfYwwv3.js";import{E as qt,a as Qt}from"./el-carousel-item-Bu3eEokz.js";/* empty css                        */import{b as Zt,E as Xt,a as Yt}from"./el-dropdown-item-CgMmokvT.js";import{_ as il}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as xt,a as eo,E as ul}from"./vnode-DfneDD37.js";import{E as dl,c as lo}from"./index-CG9L6tLM.js";import{g as tl}from"./text-C9KP7X7d.js";import{f as to}from"./file-utils-BfzHgCq1.js";import{E as oo}from"./index-B-u1Rqw0.js";import"./index-ChZfA3gH.js";import"./throttle-BQKBmdXm.js";import"./index-C8SbU5-9.js";import"./validator-Cw4sOcG_.js";const no=xl({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Be([String,Object])},previewSrcList:{type:Be(Array),default:()=>et([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Be(String)}}),ao={load:W=>W instanceof Event,error:W=>W instanceof Event,switch:W=>Yl(W),close:()=>!0,show:()=>!0},so=nl({name:"ElImage",inheritAttrs:!1}),io=nl({...so,props:no,emits:ao,setup(W,{expose:be,emit:T}){const b=W,{t:de}=tt(),D=ot("image"),ne=nt(),E=oe(()=>at(Object.entries(ne).filter(([m])=>/^(data-|on[A-Z])/i.test(m)||["id","style"].includes(m)))),c=xt({excludeListeners:!0,excludeKeys:oe(()=>Object.keys(E.value))}),ve=g(),G=g(!1),F=g(!0),x=g(!1),j=g(),H=g(),re=_e&&"loading"in HTMLImageElement.prototype;let q;const ce=oe(()=>[D.e("inner"),ae.value&&D.e("preview"),F.value&&D.is("loading")]),ge=oe(()=>{const{fit:m}=b;return _e&&m?{objectFit:m}:{}}),ae=oe(()=>{const{previewSrcList:m}=b;return st(m)&&m.length>0}),we=oe(()=>{const{previewSrcList:m,initialIndex:U}=b;let N=U;return U>m.length-1&&(N=0),N}),u=oe(()=>b.loading==="eager"?!1:!re&&b.loading==="lazy"||b.lazy),Q=()=>{_e&&(F.value=!0,G.value=!1,ve.value=b.src)};function r(m){F.value=!1,G.value=!1,T("load",m)}function i(m){F.value=!1,G.value=!0,T("error",m)}function k(m){m&&(Q(),A())}const _=pt(k,200,!0);async function I(){var m;if(!_e)return;await ke();const{scrollContainer:U}=b;if(dt(U))H.value=U;else if(rt(U)&&U!=="")H.value=(m=document.querySelector(U))!=null?m:void 0;else if(j.value){const X=eo(j.value);H.value=ct(X)?void 0:X}const{stop:N}=mt(j,([X])=>{_(X.isIntersecting)},{root:H});q=N}function A(){!_e||!_||(q?.(),H.value=void 0,q=void 0)}function Z(){ae.value&&(x.value=!0,T("show"))}function K(){x.value=!1,T("close")}function L(m){T("switch",m)}return De(()=>b.src,()=>{u.value?(F.value=!0,G.value=!1,A(),I()):Q()}),it(()=>{u.value?I():Q()}),be({showPreview:Z}),(m,U)=>(V(),S("div",Ze({ref_key:"container",ref:j},s(E),{class:[s(D).b(),m.$attrs.class]}),[G.value?Se(m.$slots,"error",{key:0},()=>[e("div",{class:Ke(s(D).e("error"))},d(s(de)("el.image.error")),3)]):(V(),S(pe,{key:1},[ve.value!==void 0?(V(),S("img",Ze({key:0},s(c),{src:ve.value,loading:m.loading,style:s(ge),class:s(ce),crossorigin:m.crossorigin,onClick:Z,onLoad:r,onError:i}),null,16,["src","loading","crossorigin"])):z("v-if",!0),F.value?(V(),S("div",{key:1,class:Ke(s(D).e("wrapper"))},[Se(m.$slots,"placeholder",{},()=>[e("div",{class:Ke(s(D).e("placeholder"))},null,2)])],2)):z("v-if",!0)],64)),s(ae)?(V(),S(pe,{key:2},[x.value?(V(),J(s(Rt),{key:0,"z-index":m.zIndex,"initial-index":s(we),infinite:m.infinite,"zoom-rate":m.zoomRate,"min-scale":m.minScale,"max-scale":m.maxScale,"show-progress":m.showProgress,"url-list":m.previewSrcList,crossorigin:m.crossorigin,"hide-on-click-modal":m.hideOnClickModal,teleported:m.previewTeleported,"close-on-press-escape":m.closeOnPressEscape,onClose:K,onSwitch:L},ut({toolbar:a(N=>[Se(m.$slots,"toolbar",Xe(Ye(N)))]),default:a(()=>[m.$slots.viewer?(V(),S("div",{key:0},[Se(m.$slots,"viewer")])):z("v-if",!0)]),_:2},[m.$slots.progress?{name:"progress",fn:a(N=>[Se(m.$slots,"progress",Xe(Ye(N)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):z("v-if",!0)],64)):z("v-if",!0)],16))}});var uo=lt(io,[["__file","image.vue"]]);const ro=vt(uo),co={class:"announcement-editor"},mo={class:"announcement-section"},po={class:"announcement-header"},vo={class:"announcement-section",style:{flex:"1"}},go={class:"announcement-section"},fo={class:"editor-toolbar"},yo={class:"announcement-section"},ho={class:"section-label"},bo={class:"upload-content"},wo={class:"upload-text"},Vo={key:0,class:"images-list"},ko={class:"image-preview"},$o=["src","alt"],Co={class:"image-info"},_o={class:"image-actions"},So={class:"preview-content"},Eo={key:0,class:"preview-title"},Ao={key:1,class:"preview-images-carousel"},Uo={class:"carousel-item"},To=["src","alt"],Io={key:0,class:"image-caption"},zo={class:"carousel-info"},Ko=["innerHTML"],Lo={key:3,class:"preview-empty"},Bo={__name:"AnnouncementEditor",props:{modelValue:{type:Object,default:()=>({title:"",content:"",images:[],displayMode:"always"})},maxImages:{type:Number,default:10},maxContentLength:{type:Number,default:5e3}},emits:["update:modelValue"],setup(W,{emit:be}){const T=W,b=be,de=[{label:"红色",value:"#FF0000",tag:"red"},{label:"绿色",value:"#00AA00",tag:"green"},{label:"蓝色",value:"#0066FF",tag:"blue"},{label:"黄色",value:"#FFAA00",tag:"yellow"}],D=g(!1),ne=g(0),E=g(null),c=he({title:T.modelValue.title||"",content:T.modelValue.content||"",images:[...T.modelValue.images||[]],displayMode:T.modelValue.displayMode||"always"});De(()=>T.modelValue,r=>{if(r)if(Object.assign(c,{title:r.title||"",content:r.content||"",displayMode:r.displayMode||"always"}),Array.isArray(r.images)){const i=r.images.map(k=>({...k}));c.images.splice(0,c.images.length,...i)}else c.images.splice(0,c.images.length)},{deep:!0}),De(c,r=>{b("update:modelValue",{title:r.title,content:r.content,images:r.images,displayMode:r.displayMode})},{deep:!0});const ve=async r=>{const i=Array.from(r.target.files);await F(i),r.target.value=""},G=async r=>{const i=Array.from(r.dataTransfer.files);await F(i)},F=async r=>{const i=r.filter(k=>k.type.startsWith("image/"));if(i.length===0){ue.warning("请选择图片文件");return}if(c.images.length+i.length>T.maxImages){ue.error(`公告图片最多${T.maxImages}张，当前已有 ${c.images.length} 张`);return}for(const k of i){if(k.size>500*1024){ue.error(`图片 ${k.name} 超过500KB限制`);continue}try{const _=await x(k);c.images.push({base64:_,caption:""})}catch(_){ue.error(`处理图片 ${k.name} 失败: ${_.message}`)}}},x=r=>new Promise((i,k)=>{const _=new FileReader;_.onload=()=>i(_.result),_.onerror=k,_.readAsDataURL(r)}),j=async r=>{const i=r.clipboardData?.items;if(!i)return;const k=[];for(let _=0;_<i.length;_++){const I=i[_];if(I.type.startsWith("image/")){const A=I.getAsFile();A&&k.push(A)}}k.length>0&&(r.preventDefault(),await F(k))},H=r=>{c.images.splice(r,1)},re=r=>{if(r>0){const i=c.images[r];c.images[r]=c.images[r-1],c.images[r-1]=i}},q=r=>{if(r<c.images.length-1){const i=c.images[r];c.images[r]=c.images[r+1],c.images[r+1]=i}},ce=()=>{const r=prompt("请输入链接地址:");r&&(c.content+=`[link]${r}[/link]`,ke(()=>{E.value?.focus()}))},ge=r=>{const i=`[${r.tag}]文本[/${r.tag}]`;c.content+=i,ke(()=>{E.value?.focus()})},ae=()=>{const r="[bold]文本[/bold]";c.content+=r,ke(()=>{E.value?.focus()})},we=r=>{const i=`[${r}]文本[/${r}]`;c.content+=i,ke(()=>{E.value?.focus()})},u=()=>{const r=prompt("请输入要高亮的文本:");r&&(c.content+=`[highlight]${r}[/highlight]`,ke(()=>{E.value?.focus()}))},Q=r=>{if(!r)return"";let i=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return i=i.replace(/\[bold\](.*?)\[\/bold\]/g,"<strong>$1</strong>"),i=i.replace(/\[large\](.*?)\[\/large\]/g,'<span style="font-size: 18px;">$1</span>'),i=i.replace(/\[xlarge\](.*?)\[\/xlarge\]/g,'<span style="font-size: 22px;">$1</span>'),i=i.replace(/\[red\](.*?)\[\/red\]/g,'<span style="color: #FF0000;">$1</span>'),i=i.replace(/\[green\](.*?)\[\/green\]/g,'<span style="color: #00AA00;">$1</span>'),i=i.replace(/\[blue\](.*?)\[\/blue\]/g,'<span style="color: #0066FF;">$1</span>'),i=i.replace(/\[yellow\](.*?)\[\/yellow\]/g,'<span style="color: #FFAA00;">$1</span>'),i=i.replace(/\[highlight\](.*?)\[\/highlight\]/g,'<mark style="background-color: #FFFF00; padding: 2px 4px;">$1</mark>'),i=i.replace(/\[link\](.*?)\[\/link\]/g,'<a href="$1" target="_blank" style="color: #0066FF; text-decoration: underline;">$1</a>'),i=i.replace(/\n/g,"<br>"),i};return(r,i)=>{const k=al,_=sl,I=ul,A=dl,Z=Yt,K=Xt,L=Zt,m=lo,U=ft,N=Qt,X=qt,ee=Jt,le=Ht;return V(),S("div",co,[e("div",mo,[i[9]||(i[9]=e("label",{class:"section-label"},"展示次数",-1)),o(_,{modelValue:c.displayMode,"onUpdate:modelValue":i[0]||(i[0]=v=>c.displayMode=v)},{default:a(()=>[o(k,{label:"always"},{default:a(()=>[...i[7]||(i[7]=[y("每次访问都显示",-1)])]),_:1}),o(k,{label:"once"},{default:a(()=>[...i[8]||(i[8]=[y("仅显示一次",-1)])]),_:1})]),_:1},8,["modelValue"]),i[10]||(i[10]=e("div",{class:"form-tip"},'选择"仅显示一次"时，用户关闭公告后不会再看到',-1))]),e("div",po,[e("div",vo,[i[11]||(i[11]=e("label",{class:"section-label"},"公告标题（可选）",-1)),o(I,{modelValue:c.title,"onUpdate:modelValue":i[1]||(i[1]=v=>c.title=v),placeholder:"输入公告标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),o(A,{type:"primary",onClick:i[2]||(i[2]=v=>D.value=!0),style:{"align-self":"flex-end","margin-bottom":"0"}},{default:a(()=>[...i[12]||(i[12]=[y(" 预览公告 ",-1)])]),_:1})]),e("div",go,[i[20]||(i[20]=e("label",{class:"section-label"},"公告文本（支持粘贴图片）",-1)),e("div",fo,[o(m,null,{default:a(()=>[o(A,{size:"small",onClick:ce,title:"插入链接"},{default:a(()=>[o(s(w),{icon:"material-symbols:link"}),i[13]||(i[13]=y(" 链接 ",-1))]),_:1}),o(L,{onCommand:ge,trigger:"click"},{dropdown:a(()=>[o(K,null,{default:a(()=>[(V(),S(pe,null,$e(de,v=>o(Z,{key:v.value,command:v},{default:a(()=>[e("span",{class:"color-swatch",style:Ee({backgroundColor:v.value})},null,4),y(" "+d(v.label),1)]),_:2},1032,["command"])),64))]),_:1})]),default:a(()=>[o(A,{size:"small",title:"文本颜色"},{default:a(()=>[o(s(w),{icon:"material-symbols:palette"}),i[14]||(i[14]=y(" 颜色 ",-1))]),_:1})]),_:1}),o(A,{size:"small",onClick:ae,title:"加粗"},{default:a(()=>[o(s(w),{icon:"material-symbols:format-bold"}),i[15]||(i[15]=y(" 加粗 ",-1))]),_:1}),o(L,{onCommand:we,trigger:"click"},{dropdown:a(()=>[o(K,null,{default:a(()=>[o(Z,{command:"large"},{default:a(()=>[...i[17]||(i[17]=[e("span",{class:"size-preview",style:{"font-size":"18px"}},"大",-1)])]),_:1}),o(Z,{command:"xlarge"},{default:a(()=>[...i[18]||(i[18]=[e("span",{class:"size-preview",style:{"font-size":"22px"}},"特大",-1)])]),_:1})]),_:1})]),default:a(()=>[o(A,{size:"small",title:"字体大小"},{default:a(()=>[o(s(w),{icon:"material-symbols:text-fields"}),i[16]||(i[16]=y(" 大小 ",-1))]),_:1})]),_:1}),o(A,{size:"small",onClick:u,title:"高亮"},{default:a(()=>[o(s(w),{icon:"material-symbols:highlight"}),i[19]||(i[19]=y(" 高亮 ",-1))]),_:1})]),_:1})]),o(I,{ref_key:"contentInput",ref:E,modelValue:c.content,"onUpdate:modelValue":i[3]||(i[3]=v=>c.content=v),type:"textarea",placeholder:"输入公告内容（可选）或粘贴图片。支持 [link]URL[/link]、[red]文本[/red]、[bold]文本[/bold] 等标记",maxlength:W.maxContentLength,"show-word-limit":"",rows:5,onPaste:j,class:"announcement-content-input"},null,8,["modelValue","maxlength"])]),e("div",yo,[e("label",ho,"公告图片（可选，最多"+d(W.maxImages)+"张）",1),e("div",{class:"upload-area",onDragover:i[5]||(i[5]=xe(()=>{},["prevent"])),onDrop:xe(G,["prevent"])},[e("div",bo,[o(U,{class:"upload-icon"},{default:a(()=>[o(s(gt))]),_:1}),e("div",wo,[i[22]||(i[22]=e("div",null,"拖拽图片到此处或",-1)),o(A,{link:"",type:"primary",onClick:i[4]||(i[4]=v=>r.$refs.fileInput.click())},{default:a(()=>[...i[21]||(i[21]=[y(" 点击选择文件 ",-1)])]),_:1})]),i[23]||(i[23]=e("div",{class:"upload-hint"},"支持 PNG、JPG、GIF、WebP 格式，单张≤500KB，总大小≤5MB",-1))]),e("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",style:{display:"none"},onChange:ve},null,544)],32),c.images&&c.images.length>0?(V(),S("div",Vo,[(V(!0),S(pe,null,$e(c.images,(v,f)=>(V(),S("div",{key:f,class:"image-item"},[e("div",ko,[e("img",{src:v.base64,alt:`Image ${f+1}`},null,8,$o)]),e("div",Co,[o(I,{modelValue:v.caption,"onUpdate:modelValue":te=>v.caption=te,placeholder:"图片说明（可选）",maxlength:"100","show-word-limit":""},null,8,["modelValue","onUpdate:modelValue"])]),e("div",_o,[f>0?(V(),J(A,{key:0,link:"",type:"primary",onClick:te=>re(f),title:"向上移动"},{default:a(()=>[o(U,null,{default:a(()=>[o(s(yt))]),_:1})]),_:2},1032,["onClick"])):z("",!0),f<c.images.length-1?(V(),J(A,{key:1,link:"",type:"primary",onClick:te=>q(f),title:"向下移动"},{default:a(()=>[o(U,null,{default:a(()=>[o(s(ht))]),_:1})]),_:2},1032,["onClick"])):z("",!0),o(A,{link:"",type:"danger",onClick:te=>H(f),title:"删除"},{default:a(()=>[o(U,null,{default:a(()=>[o(s(bt))]),_:1})]),_:2},1032,["onClick"])])]))),128))])):z("",!0),i[24]||(i[24]=e("div",{class:"form-tip"}," 支持拖拽上传、点击选择或粘贴图片。图片会自动压缩。访问者可以关闭公告，同一设备不会再次显示。 ",-1))]),o(le,{modelValue:D.value,"onUpdate:modelValue":i[6]||(i[6]=v=>D.value=v),title:"公告预览",direction:"rtl",size:"500px",class:"announcement-preview-drawer"},{default:a(()=>[e("div",So,[c.title?(V(),S("div",Eo,d(c.title),1)):z("",!0),c.images&&c.images.length>0?(V(),S("div",Ao,[o(X,{autoplay:!1,class:"carousel"},{default:a(()=>[(V(!0),S(pe,null,$e(c.images,(v,f)=>(V(),J(N,{key:f},{default:a(()=>[e("div",Uo,[e("img",{src:v.base64,alt:`Image ${f+1}`},null,8,To),v.caption?(V(),S("div",Io,d(v.caption),1)):z("",!0)])]),_:2},1024))),128))]),_:1}),e("div",zo,d(ne.value+1)+" / "+d(c.images.length),1)])):z("",!0),c.content?(V(),S("div",{key:2,class:"preview-text",innerHTML:Q(c.content)},null,8,Ko)):z("",!0),!c.title&&!c.content&&(!c.images||c.images.length===0)?(V(),S("div",Lo,[o(ee,{description:"暂无公告内容"})])):z("",!0)])]),_:1},8,["modelValue"])])}}},Do=il(Bo,[["__scopeId","data-v-941f6260"]]),Fo={class:"settings-container"},No={class:"scroll-body"},Ro={class:"card-grid"},Mo={class:"settings-card"},Po={class:"card-title"},Oo={class:"card-content"},Wo={class:"setting-item"},Go={class:"setting-item"},jo={class:"setting-item"},Ho={class:"setting-item"},Jo={class:"setting-item"},qo={class:"settings-card"},Qo={class:"card-title"},Zo={class:"card-content"},Xo={class:"setting-item"},Yo={class:"title-item"},xo={class:"email-title"},en={class:"setting-item"},ln={class:"title-item"},tn={class:"setting-item personalized"},on={class:"background-btn"},nn={class:"settings-card"},an={class:"card-title"},sn={class:"card-content"},un={class:"setting-item"},dn={class:"setting-item"},rn={class:"setting-item"},cn={class:"setting-item"},mn={class:"setting-item"},pn={class:"settings-card"},vn={class:"card-title"},gn={class:"card-content"},fn={class:"r2domain-item"},yn={class:"r2domain"},hn={class:"setting-item"},bn={class:"r2domain"},wn={class:"settings-card"},Vn={class:"card-title"},kn={class:"card-content"},$n={class:"setting-item"},Cn={class:"forward"},_n={class:"setting-item"},Sn={class:"forward"},En={class:"setting-item"},An={class:"forward"},Un={class:"settings-card"},Tn={class:"card-title"},In={class:"card-content"},zn={class:"setting-item"},Kn={class:"setting-item"},Ln={class:"setting-item"},Bn={class:"bot-verify"},Dn={class:"setting-item"},Fn={class:"bot-verify"},Nn={class:"settings-card"},Rn={class:"card-title"},Mn={class:"card-content"},Pn={class:"setting-item"},On={class:"forward"},Wn={class:"setting-item"},Gn={class:"forward"},jn={class:"settings-card"},Hn={class:"card-title"},Jn={class:"card-content"},qn={class:"setting-item"},Qn={class:"forward"},Zn={class:"settings-card about"},Xn={class:"card-title"},Yn={class:"card-content"},xn={class:"concerning-item"},ea={class:"concerning-item"},la={class:"community"},ta={class:"concerning-item"},oa={class:"concerning-item"},na={style:{"font-size":"18px"}},aa={class:"cut-button"},sa={class:"forward-head"},ia={class:"forward-set-title"},ua={class:"forward-set-body"},da={class:"dialog-footer"},ra={class:"forward-head"},ca={class:"forward-set-title"},ma={class:"forward-set-body"},pa={class:"dialog-footer"},va={class:"forward-head"},ga={class:"forward-set-title"},fa={class:"forward-set-body"},ya={class:"dialog-footer"},ha={class:"notice-line-item"},ba={style:{"margin-right":"10px"}},wa={style:{"margin-right":"10px"}},Va={class:"notice-popup-item"},ka={class:"dialog-footer"},$a={class:"notice-popup-item",style:{"margin-top":"20px"}},Ca={style:{display:"flex","flex-direction":"column",gap:"10px"}},_a={style:{display:"flex","align-items":"center",gap:"10px"}},Sa={style:{display:"flex","align-items":"center",gap:"10px"}},Ea={class:"dialog-footer"},Aa={class:"s3-button"},ol="v2.0.0",Ua=Object.assign({name:"sys-setting"},{__name:"index",setup(W){const be=g(!1);let T=1;const{t:b,locale:de}=wt(),D=g(!0),ne=g(""),E=g(!1),c=Vt(),ve=kt(),G=g(!1),F=g(!1),x=g(!1),j=g(!1),H=g(!1),re=g(!1),q=g(!1),ce=g(!1),ge=g(!1),ae=$t(),we=Ct(),{settings:u}=_t(ae),Q=g(""),r=g(!1),i=g(!1),k=g(""),_=g(0),I=g("");let A={};const Z=g(!1);let K=g(1),L=g(1),m="{}";const U=g(!1),N=g(!1),X=g(!1),ee=he({domain:"",token:""}),le=he({siteKey:"",secretKey:""}),v=he({bucket:"",endpoint:"",region:"",s3AccessKey:"",s3SecretKey:""}),f=he({noticeTitle:"",noticeContent:"",noticeType:"",noticeDuration:"",noticePosition:"",noticeOffset:0,notice:0,noticeWidth:0}),te=g(!1),C=he({title:"",content:null,version:null,enabled:!1,displayMode:"always",images:[],overrideShareAnnouncement:!1,autoApplyNewShare:!0}),B=he({title:"",content:"",enabled:!1,displayMode:"always",images:[],overrideShareAnnouncement:!1,autoApplyNewShare:!0}),rl=oe(()=>[{label:b("enable"),value:0},{label:b("disable"),value:1},{label:b("optional"),value:2}]),cl=oe(()=>[{label:b("disable"),value:0},{label:"3s",value:3},{label:"5s",value:5},{label:"7s",value:7},{label:"10s",value:10},{label:"15s",value:15},{label:"20s",value:20}]),me=g([]),Ae=g(0),Ue=g(""),se=g([]),Te=g(0),Fe=g(0),Ne=g(0),Ie=g(0),ie=g([]);Re(),Oe();function Re(){St().then(l=>{u.value=l,ae.domainList=l.domainList,ee.domain=u.value.domainList[0],_.value=u.value.loginOpacity,D.value=!1,I.value=u.value.background?.startsWith("http")?u.value.background:"",Q.value=u.value.title,k.value=u.value.r2Domain,L.value=u.value.addVerifyCount,K.value=u.value.regVerifyCount,Ge(),Pe(),Me()})}function Me(){return Et().then(l=>{C.title=l.title||"",C.content=l.content,C.version=l.version,C.enabled=l.enabled,C.displayMode=l.displayMode||"always",C.images=l.images||[],C.overrideShareAnnouncement=l.overrideShareAnnouncement||!1,C.autoApplyNewShare=l.autoApplyNewShare!==!1}).catch(l=>{console.error("Failed to load global announcement:",l)})}function ml(){we.showNotice()}function pl(){r.value||(N.value=!0)}function vl(){r.value||(X.value=!0)}function Pe(){v.bucket=u.value.bucket,v.endpoint=u.value.endpoint,v.region=u.value.region,v.s3AccessKey="",v.s3SecretKey=""}const gl=oe(()=>{let l=Object.keys(u.value.resendTokens).map(t=>({key:t,value:u.value.resendTokens[t]}));if(l.length>0){const t=l.reduce(($,O)=>We($,O,"key")).key;Fe.value=tl(t)+30;const p=l.reduce(($,O)=>We($,O,"value")).value;Ne.value=tl(p)+30}return l});function Oe(){T>5||!T||At.get("https://api.github.com/repos/eoao/cloud-mail/releases/latest").then(({data:l})=>{be.value=l.name!==ol,T=0}).catch(l=>{T++,setTimeout(()=>{Oe()},2e3),console.error("检查更新失败：",l)})}function fl(){L.value||(L.value=1),R({addVerifyCount:L.value})}function yl(){K.value||(K.value=1),R({regVerifyCount:K.value})}const We=(l,t,p)=>{const $=O=>(O.match(/[A-Z]/g)||[]).length;return l[p].length===t[p].length?$(l[p])>$(t[p])?l:t:l[p].length>t[p].length?l:t};function hl(){ne.value="",E.value=!1,I.value=u.value.background?.startsWith("http")?u.value.background:""}function bl(){if(Ae.value=u.value.tgBotStatus,Ue.value=u.value.tgBotToken,me.value=[],u.value.tgChatId){const l=u.value.tgChatId.split(",");me.value.push(...l)}H.value=!0}function wl(){re.value=!0}function Vl(){ge.value=!0}function Ge(){f.notice=u.value.notice,f.noticeContent=u.value.noticeContent,f.noticeDuration=u.value.noticeDuration,f.noticeTitle=u.value.noticeTitle,f.noticePosition=u.value.noticePosition,f.noticeType=u.value.noticeType,f.noticeOffset=u.value.noticeOffset,f.noticeWidth=u.value.noticeWidth}function je(){Object.assign(B,{title:C.title||"",content:C.content||"",enabled:C.enabled,displayMode:C.displayMode||"always",images:[...C.images||[]],overrideShareAnnouncement:C.overrideShareAnnouncement||!1,autoApplyNewShare:C.autoApplyNewShare!==!1})}async function kl(){await Me(),je(),te.value=!0}function $l(){r.value||(r.value=!0,It({title:B.title||"",content:B.content||"",enabled:B.enabled,displayMode:B.displayMode||"always",images:B.images||[],overrideShareAnnouncement:B.overrideShareAnnouncement,autoApplyNewShare:B.autoApplyNewShare}).then(l=>{C.title=l.title||"",C.content=l.content,C.version=l.version,C.enabled=l.enabled,C.displayMode=l.displayMode||"always",C.images=l.images||[],C.overrideShareAnnouncement=l.overrideShareAnnouncement||!1,C.autoApplyNewShare=l.autoApplyNewShare!==!1,r.value=!1,ue({message:b("saveSuccessMsg"),type:"success",plain:!0}),te.value=!1}).catch(l=>{r.value=!1,ue({message:b("saveFailMsg")||"Save failed",type:"error",plain:!0})}))}function Cl(){f.noticeOffset=f.noticeOffset||0,f.noticeWidth=f.noticeWidth||0,f.noticeDuration=f.noticeDuration||0,R({...f})}function _l(){we.previewNotice({...f})}function Sl(){if(se.value=[],Te.value=u.value.forwardStatus,u.value.forwardEmail){const l=u.value.forwardEmail.split(",");se.value.push(...l)}q.value=!0}function El(){if(Ie.value=u.value.ruleType,ie.value=[],u.value.ruleEmail){const l=u.value.ruleEmail.split(",");ie.value.push(...l)}ce.value=!0}function Al(l){const t=Array.from(new Set(l.split(/[,，]/).map(p=>p.trim()).filter(p=>p)));se.value.splice(se.value.length-1,1),t.forEach(p=>{ll(p)&&!se.value.includes(p)&&se.value.push(p)})}function Ul(l){const t=Array.from(new Set(l.split(/[,，]/).map(p=>p.trim()).filter(p=>p)));ie.value.splice(ie.value.length-1,1),t.forEach(p=>{ll(p)&&!ie.value.includes(p)&&ie.value.push(p)})}function Tl(l){const t=Array.from(new Set(l.split(/[,，]/).map(p=>p.trim()).filter(p=>p)));me.value.splice(me.value.length-1,1),t.forEach(p=>{isNaN(Number(p))||me.value.push(p)})}function Il(){const l={bucket:"",endpoint:"",region:"",s3AccessKey:"",s3SecretKey:""};i.value=!0,R(l)}function zl(){const l={bucket:v.bucket,endpoint:v.endpoint,region:v.region};v.s3AccessKey&&(l.s3AccessKey=v.s3AccessKey),v.s3SecretKey&&(l.s3SecretKey=v.s3SecretKey),R(l)}function Kl(){const l={tgBotToken:Ue.value,tgBotStatus:Ae.value,tgChatId:me.value+""};R(l)}function Ll(){const l={forwardStatus:Te.value,forwardEmail:se.value+""};R(l)}function Bl(){const l={ruleEmail:ie.value+"",ruleType:Ie.value};R(l)}function Dl(){const l={};l.loginOpacity=_.value,R(l,!0)}const Fl=Gt(Dl,1e3,{leading:!1,trailing:!0});function Nl(){oo.confirm(b("delBackgroundConfirm"),{confirmButtonText:b("confirm"),cancelButtonText:b("cancel"),type:"warning"}).then(()=>{I.value="",u.value.background=null,R({background:null})})}function Rl(){const l={};l.siteKey=le.siteKey,l.secretKey=le.secretKey,R(l)}async function Ml(){let l="";if(E.value)l=await to(A,!0);else{if(I.value&&!I.value.startsWith("http")){ue({message:b("imageLinkErrorMsg"),type:"error",plain:!0});return}l=I.value}r.value=!0,Tt(l).then(t=>{u.value.background=t,Z.value=!1,ue({message:b("saveSuccessMsg"),type:"success",plain:!0}),E.value=!1,ne.value=""}).finally(()=>{r.value=!1})}function He(){Z.value=!0}function Pl(){const l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept","image/*"),l.click(),l.onchange=async t=>{A=t.target.files[0],ne.value=URL.createObjectURL(t.target.files[0]),E.value=!0}}function Ol(){const l={r2Domain:k.value};R(l)}function Wl(){F.value=!0}function Gl(){const l={resendTokens:{}},t=ee.domain.slice(1);l.resendTokens[t]=ee.token,R(l)}function jl(){({...u.value},m=JSON.stringify(u.value))}function Hl(){ee.token=""}function fe(){return r.value?!1:(jl(),!0)}function Y(l){const t={...u.value};delete t.siteKey,delete t.secretKey,delete t.s3AccessKey,delete t.s3SecretKey,delete t.resendTokens,R(t,!1)}function Jl(){R({title:Q.value})}function Ce(l){const t=document.createElement("a");t.href=l,t.target="_blank",t.click()}function R(l,t=!0){r.value||(r.value=!0,zt(l).then(()=>{r.value=!1,ue({message:b("saveSuccessMsg"),type:"success",plain:!0}),u.value.manyEmail===1&&(c.currentAccountId=ve.user.accountId),t&&Re(),G.value=!1,x.value=!1,F.value=!1,j.value=!1,H.value=!1,q.value=!1,ce.value=!1,N.value=!1,X.value=!1,re.value=!1,U.value=!1,te.value=!1}).catch(p=>{_.value=u.value.loginOpacity,u.value={...u.value,...JSON.parse(m)}}).finally(()=>{r.value=!1,i.value=!1}))}return(l,t)=>{const p=Wt,$=Ot,O=Pt,ye=Dt,h=dl,Ve=Mt,Je=ro,ql=Ut,M=ul,P=Nt,Le=Ft,qe=al,Ql=sl,Qe=Bt,Zl=Lt,Xl=Kt;return V(),S("div",Fo,[e("div",{class:Ke(["loading",D.value?"loading-show":"loading-hide"])},[o(jt)],2),D.value?z("",!0):(V(),J(Xl,{key:0,class:"scroll"},{default:a(()=>[e("div",No,[e("div",Ro,[e("div",Mo,[e("div",Po,d(l.$t("websiteSetting")),1),e("div",Oo,[e("div",Wo,[e("div",null,[e("span",null,d(l.$t("websiteReg")),1)]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).register,"onUpdate:modelValue":t[0]||(t[0]=n=>s(u).register=n)},null,8,["modelValue"])])]),e("div",Go,[e("div",null,[e("span",null,d(l.$t("loginDomain")),1)]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).loginDomain,"onUpdate:modelValue":t[1]||(t[1]=n=>s(u).loginDomain=n)},null,8,["modelValue"])])]),e("div",jo,[e("div",null,[e("span",null,d(l.$t("regKey")),1)]),e("div",null,[o(O,{onChange:Y,style:Ee(`width: ${s(de)==="en"?100:80}px;`),modelValue:s(u).regKey,"onUpdate:modelValue":t[2]||(t[2]=n=>s(u).regKey=n),placeholder:"Select"},{default:a(()=>[(V(!0),S(pe,null,$e(rl.value,n=>(V(),J($,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["style","modelValue"])])]),e("div",Ho,[e("div",null,[e("span",null,d(l.$t("addAccount")),1)]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).addEmail,"onUpdate:modelValue":t[3]||(t[3]=n=>s(u).addEmail=n)},null,8,["modelValue"])])]),e("div",Jo,[e("div",null,[e("span",null,d(l.$t("multipleEmail")),1),o(ye,{effect:"dark",content:l.$t("multipleEmailDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).manyEmail,"onUpdate:modelValue":t[4]||(t[4]=n=>s(u).manyEmail=n)},null,8,["modelValue"])])])])]),e("div",qo,[e("div",Qo,d(l.$t("customization")),1),e("div",Zo,[e("div",Xo,[e("div",Yo,[e("span",null,d(l.$t("websiteTitle")),1)]),e("div",xo,[e("span",null,d(s(u).title),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:t[5]||(t[5]=n=>G.value=!0)},{default:a(()=>[o(s(w),{icon:"lsicon:edit-outline",width:"16",height:"16"})]),_:1})])]),e("div",en,[e("div",ln,[e("span",null,d(l.$t("loginBoxOpacity")),1)]),e("div",null,[o(Ve,{size:"small",modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=n=>_.value=n),onChange:s(Fl),precision:2,step:.01,max:1,min:0},null,8,["modelValue","onChange"])])]),e("div",tn,[e("div",null,[e("span",null,d(l.$t("loginBackground")),1)]),e("div",null,[o(Je,{class:"background",src:s(el)(s(u).background),"preview-src-list":[s(el)(s(u).background)],"show-progress":"",fit:"cover"},{error:a(()=>[e("div",{class:"error-image",onClick:He},[o(s(w),{icon:"ph:image",width:"24",height:"24"})])]),_:1},8,["src","preview-src-list"]),e("div",on,[o(h,{class:"opt-button",size:"small",type:"primary",onClick:He},{default:a(()=>[o(s(w),{icon:"lsicon:edit-outline",width:"16",height:"16"})]),_:1}),o(h,{class:"opt-button",size:"small",type:"primary",onClick:Nl},{default:a(()=>[o(s(w),{icon:"material-symbols:delete-outline-rounded",width:"16",height:"16"})]),_:1})])])])])]),e("div",nn,[e("div",an,d(l.$t("emailSetting")),1),e("div",sn,[e("div",un,[e("div",null,[e("span",null,d(l.$t("receiveEmail")),1)]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).receive,"onUpdate:modelValue":t[7]||(t[7]=n=>s(u).receive=n)},null,8,["modelValue"])])]),e("div",dn,[e("div",null,[e("span",null,d(l.$t("autoRefresh")),1),o(ye,{effect:"dark",content:l.$t("autoRefreshDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])]),e("div",null,[o(O,{onChange:Y,style:Ee(`width: ${s(de)==="en"?100:80}px;`),modelValue:s(u).autoRefreshTime,"onUpdate:modelValue":t[8]||(t[8]=n=>s(u).autoRefreshTime=n),placeholder:"Select"},{default:a(()=>[(V(!0),S(pe,null,$e(cl.value,n=>(V(),J($,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["style","modelValue"])])]),e("div",rn,[e("div",null,[e("span",null,d(l.$t("sendEmail")),1)]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).send,"onUpdate:modelValue":t[9]||(t[9]=n=>s(u).send=n)},null,8,["modelValue"])])]),e("div",cn,[e("div",null,[e("span",null,d(l.$t("noRecipientTitle")),1),o(ye,{effect:"dark",content:l.$t("noRecipientDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])]),e("div",null,[o(p,{onChange:Y,"before-change":fe,"active-value":0,"inactive-value":1,modelValue:s(u).noRecipient,"onUpdate:modelValue":t[10]||(t[10]=n=>s(u).noRecipient=n)},null,8,["modelValue"])])]),e("div",mn,[e("div",null,[e("span",null,d(l.$t("resendToken")),1)]),e("div",null,[o(h,{class:"opt-button",style:{"margin-top":"0"},onClick:Vl,size:"small",type:"primary"},{default:a(()=>[o(s(w),{icon:"ic:round-list",width:"18",height:"18"})]),_:1}),o(h,{class:"opt-button",style:{"margin-top":"0"},onClick:Wl,size:"small",type:"primary"},{default:a(()=>[o(s(w),{icon:"material-symbols:add-rounded",width:"16",height:"16"})]),_:1})])])])]),e("div",pn,[e("div",vn,d(l.$t("oss")),1),e("div",gn,[e("div",fn,[e("div",null,[e("span",null,d(l.$t("osDomain")),1)]),e("div",yn,[e("span",null,d(s(u).r2Domain||""),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:t[11]||(t[11]=n=>x.value=!0)},{default:a(()=>[o(s(w),{icon:"lsicon:edit-outline",width:"16",height:"16"})]),_:1})])]),e("div",hn,[e("div",null,[e("span",null,d(l.$t("s3Configuration")),1)]),e("div",bn,[o(h,{class:"opt-button",size:"small",type:"primary",onClick:t[12]||(t[12]=n=>U.value=!0)},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"16",height:"16"})]),_:1})])])])]),e("div",wn,[e("div",Vn,d(l.$t("emailPush")),1),e("div",kn,[e("div",$n,[e("div",null,[e("span",null,d(l.$t("tgBot")),1)]),e("div",Cn,[e("span",null,d(s(u).tgBotStatus===0?l.$t("enabled"):l.$t("disabled")),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:bl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1})])]),e("div",_n,[e("div",null,[e("span",null,d(l.$t("otherEmail")),1)]),e("div",Sn,[e("span",null,d(s(u).forwardStatus===0?l.$t("enabled"):l.$t("disabled")),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:Sl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1})])]),e("div",En,[e("div",null,[e("span",null,d(l.$t("forwardingRules")),1)]),e("div",An,[e("span",null,d(s(u).ruleType===0?l.$t("forwardAll"):l.$t("rules")),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:El},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1})])])])]),e("div",Un,[e("div",Tn,d(l.$t("turnstileSetting")),1),e("div",In,[e("div",zn,[e("div",null,[e("span",null,d(l.$t("signUpVerification")),1)]),e("div",null,[o(h,{class:"opt-button",size:"small",type:"primary",onClick:vl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1}),o(O,{onChange:Y,style:Ee(`width: ${s(de)==="en"?100:80}px;`),modelValue:s(u).registerVerify,"onUpdate:modelValue":t[13]||(t[13]=n=>s(u).registerVerify=n),placeholder:"Select",class:"bot-verify-select"},{default:a(()=>[o($,{key:"1",value:0,label:l.$t("enable")},null,8,["label"]),o($,{key:"1",value:1,label:l.$t("disable")},null,8,["label"]),o($,{key:"1",value:2,label:l.$t("rulesVerify")},null,8,["label"])]),_:1},8,["style","modelValue"])])]),e("div",Kn,[e("div",null,[e("span",null,d(l.$t("addEmailVerification")),1)]),e("div",null,[o(h,{class:"opt-button",size:"small",type:"primary",onClick:pl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1}),o(O,{onChange:Y,style:Ee(`width: ${s(de)==="en"?100:80}px;`),modelValue:s(u).addEmailVerify,"onUpdate:modelValue":t[14]||(t[14]=n=>s(u).addEmailVerify=n),placeholder:"Select",class:"bot-verify-select"},{default:a(()=>[o($,{key:"1",value:0,label:l.$t("enable")},null,8,["label"]),o($,{key:"1",value:1,label:l.$t("disable")},null,8,["label"]),o($,{key:"1",value:2,label:l.$t("rulesVerify")},null,8,["label"])]),_:1},8,["style","modelValue"])])]),e("div",Ln,[t[75]||(t[75]=e("div",null,[e("span",null,"Site Key")],-1)),e("div",Bn,[e("span",null,d(s(u).siteKey),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:t[15]||(t[15]=n=>j.value=!0)},{default:a(()=>[o(s(w),{icon:"lsicon:edit-outline",width:"16",height:"16"})]),_:1})])]),e("div",Dn,[t[76]||(t[76]=e("div",null,[e("span",null,"Secret Key")],-1)),e("div",Fn,[e("span",null,d(s(u).secretKey),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:t[16]||(t[16]=n=>j.value=!0)},{default:a(()=>[o(s(w),{icon:"lsicon:edit-outline",width:"16",height:"16"})]),_:1})])])])]),e("div",Nn,[e("div",Rn,d(l.$t("noticeTitle")),1),e("div",Mn,[e("div",Pn,[e("div",null,[e("span",null,d(l.$t("noticePopup")),1)]),e("div",On,[e("span",null,d(s(u).notice===0?l.$t("enabled"):l.$t("disabled")),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:wl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1})])]),e("div",Wn,[e("div",null,[e("span",null,d(l.$t("popUp")),1)]),e("div",Gn,[o(h,{class:"opt-button",size:"small",type:"primary",onClick:ml},{default:a(()=>[o(s(w),{icon:"mynaui:click-solid",width:"18",height:"18"})]),_:1})])])])]),e("div",jn,[e("div",Hn,d(l.$t("globalAnnouncementTitle")||"Global Announcement"),1),e("div",Jn,[e("div",qn,[e("div",null,[e("span",null,d(l.$t("globalAnnouncementStatus")||"Status"),1)]),e("div",Qn,[e("span",null,d(C.enabled?l.$t("enabled"):l.$t("disabled")),1),o(h,{class:"opt-button",size:"small",type:"primary",onClick:kl},{default:a(()=>[o(s(w),{icon:"fluent:settings-48-regular",width:"18",height:"18"})]),_:1})])])])]),e("div",Zn,[e("div",Xn,d(l.$t("about")),1),e("div",Yn,[e("div",xn,[e("span",null,d(l.$t("version"))+" :",1),o(ql,{"is-dot":"",hidden:!be.value},{default:a(()=>[o(h,{onClick:t[17]||(t[17]=n=>Ce("https://github.com/eoao/cloud-mail/releases"))},{icon:a(()=>[o(s(w),{icon:"qlementine-icons:version-control-16",style:{"font-size":"20px"},color:"#1890FF"})]),default:a(()=>[y(d(ol)+" ")]),_:1})]),_:1},8,["hidden"])]),e("div",ea,[e("span",null,d(l.$t("community"))+" : ",1),e("div",la,[o(h,{onClick:t[18]||(t[18]=n=>Ce("https://github.com/eoao/cloud-mail"))},{icon:a(()=>[o(s(w),{icon:"codicon:github-inverted",width:"22",height:"22"})]),default:a(()=>[t[77]||(t[77]=y(" Github ",-1))]),_:1}),o(h,{onClick:t[19]||(t[19]=n=>Ce("https://t.me/cloud_mail_tg"))},{icon:a(()=>[o(s(w),{icon:"logos:telegram",width:"30",height:"30"})]),default:a(()=>[t[78]||(t[78]=y(" Telegram ",-1))]),_:1})])]),e("div",ta,[e("span",null,d(l.$t("support"))+" : ",1),o(h,{onClick:t[20]||(t[20]=n=>Ce("https://doc.skymail.ink/support.html"))},{icon:a(()=>[o(s(w),{color:"#79D6B5",icon:"simple-icons:buymeacoffee",width:"20",height:"20"})]),default:a(()=>[y(d(s(b)("supportDesc"))+" ",1)]),_:1})]),e("div",oa,[e("span",null,d(l.$t("help"))+" : ",1),o(h,{onClick:t[21]||(t[21]=n=>Ce("https://doc.skymail.ink"))},{icon:a(()=>[o(s(w),{color:"#79D6B5",icon:"fluent-color:document-32",width:"18",height:"18"})]),default:a(()=>[y(d(s(b)("document"))+" ",1)]),_:1})])])])])]),o(P,{modelValue:G.value,"onUpdate:modelValue":t[23]||(t[23]=n=>G.value=n),title:l.$t("changeTitle"),width:"340",onClosed:t[24]||(t[24]=n=>Q.value=s(u).title)},{default:a(()=>[e("form",null,[o(M,{type:"text",placeholder:l.$t("websiteTitle"),modelValue:Q.value,"onUpdate:modelValue":t[22]||(t[22]=n=>Q.value=n)},null,8,["placeholder","modelValue"]),o(h,{type:"primary",loading:r.value,onClick:Jl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:F.value,"onUpdate:modelValue":t[27]||(t[27]=n=>F.value=n),title:l.$t("resendToken"),width:"340",onClosed:Hl},{default:a(()=>[e("form",null,[o(O,{style:{"margin-bottom":"15px"},modelValue:ee.domain,"onUpdate:modelValue":t[25]||(t[25]=n=>ee.domain=n),placeholder:"Select"},{default:a(()=>[(V(!0),S(pe,null,$e(s(ae).domainList,n=>(V(),J($,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(M,{type:"text",placeholder:l.$t("addResendTokenDesc"),modelValue:ee.token,"onUpdate:modelValue":t[26]||(t[26]=n=>ee.token=n)},null,8,["placeholder","modelValue"]),o(h,{type:"primary",loading:r.value,onClick:Gl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:x.value,"onUpdate:modelValue":t[29]||(t[29]=n=>x.value=n),title:l.$t("addOsDomain"),width:"340",onClosed:t[30]||(t[30]=n=>k.value=s(u).r2Domain)},{default:a(()=>[e("form",null,[o(M,{type:"text",placeholder:l.$t("domainDesc"),modelValue:k.value,"onUpdate:modelValue":t[28]||(t[28]=n=>k.value=n)},null,8,["placeholder","modelValue"]),o(h,{type:"primary",loading:r.value,onClick:Ol},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:j.value,"onUpdate:modelValue":t[33]||(t[33]=n=>j.value=n),title:l.$t("addTurnstileSecret"),width:"340",onClosed:t[34]||(t[34]=n=>{le.secretKey="",le.siteKey=""})},{default:a(()=>[e("form",null,[o(M,{type:"text",placeholder:"Site Key",modelValue:le.siteKey,"onUpdate:modelValue":t[31]||(t[31]=n=>le.siteKey=n)},null,8,["modelValue"]),o(M,{type:"text",style:{"margin-top":"15px"},placeholder:"Secret Key",modelValue:le.secretKey,"onUpdate:modelValue":t[32]||(t[32]=n=>le.secretKey=n)},null,8,["modelValue"]),o(h,{type:"primary",loading:r.value,onClick:Rl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:Z.value,"onUpdate:modelValue":t[37]||(t[37]=n=>Z.value=n),class:"cut-dialog",onClosed:hl},{header:a(()=>[e("span",na,[y(d(l.$t("backgroundTitle"))+" ",1),o(ye,null,{content:a(()=>[e("span",null,d(l.$t("backgroundWarning")),1)]),default:a(()=>[o(s(w),{class:"title-icon warning",icon:"fe:warning",width:"18",height:"18"})]),_:1})])]),default:a(()=>[E.value?z("",!0):(V(),J(M,{key:0,placeholder:l.$t("backgroundUrlDesc"),modelValue:I.value,"onUpdate:modelValue":t[35]||(t[35]=n=>I.value=n),class:"background-url"},null,8,["placeholder","modelValue"])),E.value?(V(),J(Je,{key:1,"preview-src-list":[ne.value],"show-progress":"",class:"cropper",fit:"cover",src:ne.value},null,8,["preview-src-list","src"])):z("",!0),e("div",aa,[E.value?z("",!0):(V(),J(h,{key:0,type:"primary",link:"",onClick:Pl},{default:a(()=>[y(d(l.$t("localUpload")),1)]),_:1})),E.value?(V(),J(h,{key:1,type:"primary",link:"",onClick:t[36]||(t[36]=n=>E.value=!1)},{default:a(()=>[y(d(l.$t("imageLink")),1)]),_:1})):z("",!0),o(h,{type:"primary",loading:r.value,onClick:Ml},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue"]),o(P,{modelValue:H.value,"onUpdate:modelValue":t[41]||(t[41]=n=>H.value=n),class:"forward-dialog"},{header:a(()=>[e("div",sa,[e("span",ia,d(l.$t("tgBot")),1),o(ye,{effect:"dark",content:l.$t("tgBotDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])])]),footer:a(()=>[e("div",da,[o(p,{modelValue:Ae.value,"onUpdate:modelValue":t[40]||(t[40]=n=>Ae.value=n),"active-value":0,"inactive-value":1,"active-text":l.$t("enable"),"inactive-text":l.$t("disable")},null,8,["modelValue","active-text","inactive-text"]),o(h,{loading:r.value,type:"primary",onClick:Kl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e("div",ua,[o(M,{placeholder:l.$t("tgBotToken"),modelValue:Ue.value,"onUpdate:modelValue":t[38]||(t[38]=n=>Ue.value=n)},null,8,["placeholder","modelValue"]),o(Le,{"tag-type":"warning",placeholder:l.$t("toBotTokenDesc"),modelValue:me.value,"onUpdate:modelValue":t[39]||(t[39]=n=>me.value=n),onAddTag:Tl},null,8,["placeholder","modelValue"])])]),_:1},8,["modelValue"]),o(P,{modelValue:q.value,"onUpdate:modelValue":t[44]||(t[44]=n=>q.value=n),class:"forward-dialog"},{header:a(()=>[e("div",ra,[e("span",ca,d(l.$t("otherEmail")),1),o(ye,{effect:"dark",content:l.$t("otherEmailDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])])]),footer:a(()=>[e("div",pa,[o(p,{modelValue:Te.value,"onUpdate:modelValue":t[43]||(t[43]=n=>Te.value=n),"active-value":0,"inactive-value":1,"active-text":l.$t("enable"),"inactive-text":l.$t("disable")},null,8,["modelValue","active-text","inactive-text"]),o(h,{loading:r.value,type:"primary",onClick:Ll},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e("div",ma,[o(Le,{"tag-type":"warning",placeholder:l.$t("otherEmailInputDesc"),modelValue:se.value,"onUpdate:modelValue":t[42]||(t[42]=n=>se.value=n),onAddTag:Al},null,8,["placeholder","modelValue"])])]),_:1},8,["modelValue"]),o(P,{modelValue:ce.value,"onUpdate:modelValue":t[47]||(t[47]=n=>ce.value=n),class:"forward-dialog"},{header:a(()=>[e("div",va,[e("span",ga,d(l.$t("forwardingRules")),1),o(ye,{effect:"dark",content:l.$t("forwardingRulesDesc")},{default:a(()=>[o(s(w),{class:"warning",icon:"fe:warning",width:"18",height:"18"})]),_:1},8,["content"])])]),footer:a(()=>[e("div",ya,[o(Ql,{modelValue:Ie.value,"onUpdate:modelValue":t[46]||(t[46]=n=>Ie.value=n)},{default:a(()=>[o(qe,{value:0},{default:a(()=>[y(d(l.$t("forwardAll")),1)]),_:1}),o(qe,{value:1},{default:a(()=>[y(d(l.$t("rules")),1)]),_:1})]),_:1},8,["modelValue"]),o(h,{loading:r.value,type:"primary",onClick:Bl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e("div",fa,[o(Le,{placeholder:l.$t("ruleEmailsInputDesc"),"tag-type":"success",modelValue:ie.value,"onUpdate:modelValue":t[45]||(t[45]=n=>ie.value=n),onAddTag:Ul},null,8,["placeholder","modelValue"])])]),_:1},8,["modelValue"]),o(P,{class:"resend-table",modelValue:ge.value,"onUpdate:modelValue":t[48]||(t[48]=n=>ge.value=n),title:l.$t("resendTokenList")},{default:a(()=>[o(Zl,{data:gl.value},{default:a(()=>[o(Qe,{"min-width":Fe.value,property:"key",label:l.$t("domain"),"show-overflow-tooltip":!0},null,8,["min-width","label"]),o(Qe,{width:Ne.value,property:"value",label:"Token",fixed:"right","show-overflow-tooltip":!0},null,8,["width"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),o(P,{modelValue:X.value,"onUpdate:modelValue":t[50]||(t[50]=n=>X.value=n),title:l.$t("rulesVerifyTitle",{count:s(K)}),onClosed:t[51]||(t[51]=n=>ze(K)?K.value=s(u).regVerifyCount:K=s(u).regVerifyCount)},{default:a(()=>[e("form",null,[o(Ve,{type:"text",modelValue:s(K),"onUpdate:modelValue":t[49]||(t[49]=n=>ze(K)?K.value=n:K=n),min:1},null,8,["modelValue"]),o(h,{type:"primary",loading:r.value,onClick:yl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:N.value,"onUpdate:modelValue":t[53]||(t[53]=n=>N.value=n),title:l.$t("rulesVerifyTitle",{count:s(L)}),onClosed:t[54]||(t[54]=n=>ze(L)?L.value=s(u).addVerifyCount:L=s(u).addVerifyCount)},{default:a(()=>[e("form",null,[o(Ve,{type:"text",modelValue:s(L),"onUpdate:modelValue":t[52]||(t[52]=n=>ze(L)?L.value=n:L=n),min:1},null,8,["modelValue"]),o(h,{type:"primary",loading:r.value,onClick:fl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"]),o(P,{top:"5vh",modelValue:re.value,"onUpdate:modelValue":t[63]||(t[63]=n=>re.value=n),title:l.$t("noticePopup"),class:"notice-popup",onClosed:Ge},{footer:a(()=>[e("div",ka,[o(p,{modelValue:f.notice,"onUpdate:modelValue":t[62]||(t[62]=n=>f.notice=n),"active-value":0,"inactive-value":1,"active-text":l.$t("enable"),"inactive-text":l.$t("disable")},null,8,["modelValue","active-text","inactive-text"]),e("div",null,[o(h,{onClick:_l},{default:a(()=>[y(d(l.$t("preview")),1)]),_:1}),o(h,{loading:r.value,type:"primary",onClick:Cl},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])])]),default:a(()=>[e("form",null,[o(M,{modelValue:f.noticeTitle,"onUpdate:modelValue":t[55]||(t[55]=n=>f.noticeTitle=n),placeholder:s(b)("titleDesc")},null,8,["modelValue","placeholder"]),e("div",ha,[o(O,{modelValue:f.noticeType,"onUpdate:modelValue":t[56]||(t[56]=n=>f.noticeType=n)},{prefix:a(()=>[e("span",ba,d(l.$t("icon")),1)]),default:a(()=>[o($,{key:"none",label:"None",value:"none"}),o($,{key:"primary",label:"Primary",value:"primary"}),o($,{key:"success",label:"Success",value:"success"}),o($,{key:"warning",label:"Warning",value:"warning"}),o($,{key:"info",label:"Info",value:"info"})]),_:1},8,["modelValue"]),o(O,{modelValue:f.noticePosition,"onUpdate:modelValue":t[57]||(t[57]=n=>f.noticePosition=n)},{prefix:a(()=>[e("span",wa,d(l.$t("position")),1)]),default:a(()=>[o($,{key:"top-left",label:s(b)("topLeft"),value:"top-left"},null,8,["label"]),o($,{key:"top-right",label:s(b)("topRight"),value:"top-right"},null,8,["label"]),o($,{key:"bottom-left",label:s(b)("bottomLeft"),value:"bottom-left"},null,8,["label"]),o($,{key:"bottom-right",label:s(b)("bottomRight"),value:"bottom-right"},null,8,["label"])]),_:1},8,["modelValue"]),o(Ve,{modelValue:f.noticeWidth,"onUpdate:modelValue":t[58]||(t[58]=n=>f.noticeWidth=n)},{prefix:a(()=>[y(d(l.$t("width")),1)]),suffix:a(()=>[...t[79]||(t[79]=[y(" px ",-1)])]),_:1},8,["modelValue"]),o(Ve,{modelValue:f.noticeOffset,"onUpdate:modelValue":t[59]||(t[59]=n=>f.noticeOffset=n)},{prefix:a(()=>[y(d(l.$t("offset")),1)]),suffix:a(()=>[...t[80]||(t[80]=[y(" px ",-1)])]),_:1},8,["modelValue"]),o(Ve,{modelValue:f.noticeDuration,"onUpdate:modelValue":t[60]||(t[60]=n=>f.noticeDuration=n)},{prefix:a(()=>[y(d(l.$t("duration")),1)]),suffix:a(()=>[...t[81]||(t[81]=[y(" ms ",-1)])]),_:1},8,["modelValue"])]),e("div",Va,[o(M,{modelValue:f.noticeContent,"onUpdate:modelValue":t[61]||(t[61]=n=>f.noticeContent=n),autosize:{minRows:15,maxRows:25},type:"textarea",placeholder:s(b)("noticeContentDesc")},null,8,["modelValue","placeholder"])])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:te.value,"onUpdate:modelValue":t[68]||(t[68]=n=>te.value=n),title:l.$t("globalAnnouncementTitle")||"Global Announcement",class:"notice-popup",width:"800px",onClosed:je},{footer:a(()=>[e("div",Ea,[o(p,{modelValue:B.enabled,"onUpdate:modelValue":t[67]||(t[67]=n=>B.enabled=n),"active-text":l.$t("enable"),"inactive-text":l.$t("disable")},null,8,["modelValue","active-text","inactive-text"]),o(h,{loading:r.value,type:"primary",onClick:$l},{default:a(()=>[y(d(l.$t("save")),1)]),_:1},8,["loading"])])]),default:a(()=>[e("form",null,[o(Do,{modelValue:B,"onUpdate:modelValue":t[64]||(t[64]=n=>B=n),maxImages:10,maxContentLength:5e3},null,8,["modelValue"]),e("div",$a,[e("label",null,d(l.$t("announcementConfig")||"Announcement Configuration"),1),e("div",Ca,[e("div",_a,[o(p,{modelValue:B.overrideShareAnnouncement,"onUpdate:modelValue":t[65]||(t[65]=n=>B.overrideShareAnnouncement=n)},null,8,["modelValue"]),e("span",null,d(l.$t("overrideShareAnnouncement")||"Override per-share announcements"),1)]),e("div",Sa,[o(p,{modelValue:B.autoApplyNewShare,"onUpdate:modelValue":t[66]||(t[66]=n=>B.autoApplyNewShare=n)},null,8,["modelValue"]),e("span",null,d(l.$t("autoApplyNewShare")||"Auto-apply to new shares"),1)])])])])]),_:1},8,["modelValue","title"]),o(P,{modelValue:U.value,"onUpdate:modelValue":t[74]||(t[74]=n=>U.value=n),title:s(b)("s3Configuration"),width:"340",onClosed:Pe},{default:a(()=>[e("form",null,[o(M,{class:"dialog-input",type:"text",placeholder:"Bucket",modelValue:v.bucket,"onUpdate:modelValue":t[69]||(t[69]=n=>v.bucket=n)},null,8,["modelValue"]),o(M,{class:"dialog-input",type:"text",placeholder:"Endpoint",modelValue:v.endpoint,"onUpdate:modelValue":t[70]||(t[70]=n=>v.endpoint=n)},null,8,["modelValue"]),o(M,{class:"dialog-input",type:"text",placeholder:"Region",modelValue:v.region,"onUpdate:modelValue":t[71]||(t[71]=n=>v.region=n)},null,8,["modelValue"]),o(M,{class:"dialog-input",type:"text",placeholder:s(u).s3AccessKey||"Access Key",modelValue:v.s3AccessKey,"onUpdate:modelValue":t[72]||(t[72]=n=>v.s3AccessKey=n)},null,8,["placeholder","modelValue"]),o(M,{type:"text",placeholder:s(u).s3SecretKey||"Secret Key",modelValue:v.s3SecretKey,"onUpdate:modelValue":t[73]||(t[73]=n=>v.s3SecretKey=n)},null,8,["placeholder","modelValue"]),e("div",Aa,[o(h,{loading:i.value,onClick:Il},{default:a(()=>[y(d(s(b)("clear")),1)]),_:1},8,["loading"]),o(h,{type:"primary",loading:r.value&&!i.value,onClick:zl},{default:a(()=>[y(d(s(b)("save")),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue","title"])]),_:1}))])}}}),ds=il(Ua,[["__scopeId","data-v-4cb58395"]]);export{ds as default};
